<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Estate Planner Pro - Plan Your Legacy</title>

<style>
body{
  margin:0;
  font-family:"Times New Roman", Georgia, serif;
  background:#1a202c;
  position:relative;
  overflow-x:hidden;
  min-height:100vh;
}

/* Dark background with subtle texture */
body::before{
  content:'';
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:#1a202c;
  z-index:-3;
}

/* Subtle noise texture overlay */
body::after{
  content:'';
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background-image:
    linear-gradient(rgba(59, 130, 246, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.02) 1px, transparent 1px);
  background-size: 50px 50px;
  opacity:0.5;
  z-index:-2;
}

/* Background text watermarks */
.bg-text{
  position:fixed;
  font-size:120px;
  font-weight:700;
  color:rgba(255, 255, 255, 0.03);
  z-index:-1;
  pointer-events:none;
  user-select:none;
  font-family:"Times New Roman", Georgia, serif;
  letter-spacing:-2px;
  line-height:1.2;
}
.bg-text.large{
  font-size:180px;
  color:rgba(255, 255, 255, 0.04);
}
.bg-text:nth-child(1){
  top:15%;
  left:5%;
  transform:rotate(-15deg);
}
.bg-text:nth-child(2){
  bottom:20%;
  right:5%;
  transform:rotate(12deg);
}
.bg-text:nth-child(3){
  top:45%;
  left:50%;
  transform:translate(-50%, -50%) rotate(-8deg);
}
.bg-text:nth-child(4){
  top:5%;
  right:10%;
  font-size:90px;
  color:rgba(255, 255, 255, 0.05);
  transform:rotate(18deg);
}
.bg-text:nth-child(5){
  bottom:10%;
  left:15%;
  font-size:85px;
  color:rgba(255, 255, 255, 0.04);
  transform:rotate(-12deg);
}

/* Removed - cleaner background */

/* Removed - cleaner background */

@keyframes fadeIn{
  from{opacity:0; transform:translateY(10px)}
  to{opacity:1; transform:translateY(0)}
}

@keyframes pulse{
  0%, 100%{transform:scale(1)}
  50%{transform:scale(1.05)}
}

@keyframes shake{
  0%, 100%{transform:translateX(0)}
  25%{transform:translateX(-5px)}
  75%{transform:translateX(5px)}
}

.container{
  max-width:1200px;
  margin:40px auto;
  padding:40px;
  background:#ffffff;
  border-radius:12px;
  box-shadow:
    0 20px 60px rgba(0,0,0,0.3),
    0 8px 24px rgba(0,0,0,0.2);
  position:relative;
  border:1px solid rgba(226, 232, 240, 0.3);
  animation:fadeIn 0.6s ease;
}

/* Premium Badge */
.premium-badge{
  position:fixed;
  top:20px;
  left:20px;
  padding:10px 20px;
  background:linear-gradient(135deg, #fbbf24, #f59e0b);
  border-radius:8px;
  box-shadow:0 4px 12px rgba(251, 191, 36, 0.4);
  font-size:14px;
  font-weight:700;
  color:#ffffff;
  z-index:1000;
  text-transform:uppercase;
  letter-spacing:1px;
  animation:pulse 2s ease infinite;
}

.free-badge{
  background:linear-gradient(135deg, #64748b, #475569);
  animation:none;
}

.subscription-active{
  background:linear-gradient(135deg, #10b981, #059669);
  animation:none;
}

h1{
  text-align:center;
  margin:0;
  color:#1e293b;
  font-size:2.5em;
  font-weight:600;
  text-shadow:0 2px 4px rgba(0,0,0,0.05);
}
.subtitle{
  text-align:center;
  color:#64748b;
  margin-bottom:20px;
  font-size:0.95em;
}

/* Auto-save indicator */
.save-status{
  position:fixed;
  top:20px;
  right:20px;
  padding:10px 20px;
  background:rgba(255,255,255,0.95);
  border-radius:8px;
  box-shadow:0 4px 12px rgba(0,0,0,0.15);
  font-size:14px;
  color:#64748b;
  display:flex;
  align-items:center;
  gap:8px;
  z-index:1000;
  transition:all 0.3s ease;
  opacity:0;
  transform:translateY(-10px);
}
.save-status.show{
  opacity:1;
  transform:translateY(0);
}
.save-status.saving{
  color:#3b82f6;
  background:rgba(239, 246, 255, 0.95);
}
.save-status.saved{
  color:#10b981;
  background:rgba(236, 253, 245, 0.95);
}
.save-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:currentColor;
  animation:pulse 1.5s ease infinite;
}

.topbar,.toolbar{
  display:grid;
  gap:10px;
  margin-bottom:15px;
}
.topbar{grid-template-columns:2fr 1fr 1fr}
.toolbar{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}

select,input,textarea,button{
  padding:12px;
  border-radius:6px;
  border:1px solid #e2e8f0;
  width:100%;
  box-sizing:border-box;
  font-family:inherit;
  font-size:14px;
  transition:all 0.2s ease;
}
select:focus,input:focus,textarea:focus{
  outline:none;
  border-color:#3b82f6;
  box-shadow:0 0 0 3px rgba(59, 130, 246, 0.1);
}
button{
  cursor:pointer;
  background:#f8fafc;
  color:#334155;
  font-weight:500;
  border:1px solid #e2e8f0;
  position:relative;
  overflow:hidden;
}
button::before{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:0;
  height:0;
  border-radius:50%;
  background:rgba(59, 130, 246, 0.1);
  transform:translate(-50%, -50%);
  transition:width 0.4s ease, height 0.4s ease;
}
button:hover::before{
  width:300px;
  height:300px;
}
button:hover{
  background:#f1f5f9;
  border-color:#cbd5e1;
  transform:translateY(-1px);
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}
button:active{
  transform:translateY(0);
}

button.premium-btn{
  background:linear-gradient(135deg, #fbbf24, #f59e0b);
  color:#ffffff;
  border:none;
  font-weight:700;
  animation:pulse 2s ease infinite;
}
button.premium-btn:hover{
  background:linear-gradient(135deg, #f59e0b, #d97706);
}

.notice{
  background:#eff6ff;
  padding:12px 16px;
  border-radius:6px;
  font-size:14px;
  color:#1e40af;
  border-left:3px solid #3b82f6;
  animation:fadeIn 0.6s ease 0.2s backwards;
}

.upgrade-notice{
  background:linear-gradient(135deg, #fef3c7, #fde68a);
  border-left:3px solid #f59e0b;
  color:#92400e;
  font-weight:600;
  cursor:pointer;
  transition:all 0.2s ease;
}
.upgrade-notice:hover{
  background:linear-gradient(135deg, #fde68a, #fcd34d);
  transform:scale(1.01);
}

section{
  border:1px solid #e2e8f0;
  border-radius:8px;
  margin-top:20px;
  overflow:hidden;
  background:#ffffff;
  transition:all 0.3s ease;
  animation:fadeIn 0.6s ease backwards;
  position:relative;
}

section.locked{
  opacity:0.6;
  pointer-events:none;
}

section.locked::after{
  content:'ğŸ”’ SUBSCRIBE';
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  background:rgba(251, 191, 36, 0.95);
  color:#ffffff;
  padding:16px 32px;
  border-radius:8px;
  font-weight:700;
  font-size:18px;
  box-shadow:0 8px 24px rgba(0,0,0,0.3);
  z-index:100;
  letter-spacing:2px;
}

section:hover{
  box-shadow:0 2px 8px rgba(0,0,0,0.08);
}

.section-header{
  padding:16px;
  background:#f8fafc;
  font-weight:600;
  cursor:pointer;
  color:#1e293b;
  border-bottom:1px solid #e2e8f0;
  transition:all 0.2s ease;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.section-header::after{
  content:'â–¼';
  font-size:12px;
  color:#64748b;
  transition:transform 0.3s ease;
}
section.open .section-header::after{
  transform:rotate(180deg);
}
.section-header:hover{
  background:#f1f5f9;
}
.section-content{
  padding:16px;
  display:none;
  background:#ffffff;
  animation:fadeIn 0.4s ease;
}
section.open .section-content{display:block}

.repeat{
  border:1px solid #e2e8f0;
  padding:16px;
  border-radius:6px;
  margin-bottom:12px;
  background:#f8fafc;
  position:relative;
  transition:all 0.2s ease;
}
.repeat:hover{
  background:#f1f5f9;
  box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.repeat>*{margin-top:10px}
.repeat>*:first-child{margin-top:0}

.delete-btn{
  position:absolute;
  top:8px;
  right:8px;
  background:#fee2e2;
  color:#dc2626;
  border:1px solid #fecaca;
  padding:4px 8px;
  border-radius:4px;
  cursor:pointer;
  font-size:11px;
  font-weight:600;
  transition:all 0.2s ease;
  white-space:nowrap;
  z-index:10;
}
.delete-btn:hover{
  background:#fecaca;
  border-color:#dc2626;
  transform:scale(1.05);
}

/* Hide delete button on first item */
.section-content .repeat:first-child .delete-btn{
  display:none;
}

textarea{min-height:140px; resize:vertical}
.large{min-height:260px}

/* Progress indicator */
.progress-bar{
  height:4px;
  background:#e2e8f0;
  border-radius:2px;
  margin:20px 0;
  overflow:hidden;
}
.progress-fill{
  height:100%;
  background:linear-gradient(90deg, #3b82f6, #6366f1);
  border-radius:2px;
  transition:width 0.3s ease;
  width:0%;
}
.progress-text{
  text-align:center;
  color:#64748b;
  font-size:13px;
  margin-top:8px;
}

/* Premium Modal */
.modal{
  display:none;
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:rgba(0,0,0,0.7);
  z-index:2000;
  animation:fadeIn 0.3s ease;
}
.modal.show{display:flex; align-items:center; justify-content:center}

.modal-content{
  background:#ffffff;
  border-radius:16px;
  padding:40px;
  max-width:600px;
  width:90%;
  box-shadow:0 20px 60px rgba(0,0,0,0.3);
  animation:fadeIn 0.4s ease;
  position:relative;
}

.modal-close{
  position:absolute;
  top:16px;
  right:16px;
  background:transparent;
  border:none;
  font-size:28px;
  color:#94a3b8;
  cursor:pointer;
  padding:4px 12px;
  transition:all 0.2s ease;
}
.modal-close:hover{
  color:#1e293b;
  transform:rotate(90deg);
}

.modal-title{
  font-size:32px;
  font-weight:700;
  color:#1e293b;
  margin:0 0 8px 0;
  text-align:center;
}

.modal-subtitle{
  font-size:18px;
  color:#64748b;
  text-align:center;
  margin-bottom:32px;
}

.price-container{
  display:flex;
  gap:20px;
  margin:32px 0;
}

.price-option{
  flex:1;
  border:2px solid #e2e8f0;
  border-radius:12px;
  padding:24px;
  text-align:center;
  cursor:pointer;
  transition:all 0.3s ease;
  position:relative;
}

.price-option:hover{
  border-color:#3b82f6;
  transform:translateY(-4px);
  box-shadow:0 8px 24px rgba(59, 130, 246, 0.2);
}

.price-option.recommended{
  border-color:#fbbf24;
  background:linear-gradient(135deg, #fef3c7, #ffffff);
}

.recommended-badge{
  position:absolute;
  top:-12px;
  left:50%;
  transform:translateX(-50%);
  background:linear-gradient(135deg, #fbbf24, #f59e0b);
  color:#ffffff;
  padding:4px 16px;
  border-radius:12px;
  font-size:12px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:1px;
}

.price-label{
  font-size:14px;
  color:#64748b;
  text-transform:uppercase;
  letter-spacing:1px;
  margin-bottom:8px;
}

.price-amount{
  font-size:48px;
  font-weight:700;
  color:#1e293b;
  margin:8px 0;
}

.price-period{
  font-size:16px;
  color:#64748b;
  margin-bottom:16px;
}

.price-save{
  background:#dcfce7;
  color:#166534;
  padding:6px 12px;
  border-radius:6px;
  font-size:14px;
  font-weight:600;
  display:inline-block;
  margin-bottom:16px;
}

.features-list{
  list-style:none;
  padding:0;
  margin:32px 0;
  text-align:left;
}

.features-list li{
  padding:12px 0;
  color:#1e293b;
  font-size:16px;
  display:flex;
  align-items:center;
  gap:12px;
}

.features-list li::before{
  content:'âœ“';
  background:linear-gradient(135deg, #10b981, #059669);
  color:#ffffff;
  width:24px;
  height:24px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  flex-shrink:0;
}

.trial-notice{
  background:#eff6ff;
  border:1px solid #3b82f6;
  border-radius:8px;
  padding:16px;
  margin:24px 0;
  text-align:center;
  color:#1e40af;
  font-weight:600;
}

.buy-button{
  background:linear-gradient(135deg, #fbbf24, #f59e0b);
  color:#ffffff;
  border:none;
  padding:20px 40px;
  font-size:20px;
  font-weight:700;
  border-radius:8px;
  cursor:pointer;
  width:100%;
  transition:all 0.2s ease;
  text-transform:uppercase;
  letter-spacing:1px;
  margin-top:8px;
}

.buy-button:hover{
  background:linear-gradient(135deg, #f59e0b, #d97706);
  transform:translateY(-2px);
  box-shadow:0 8px 24px rgba(251, 191, 36, 0.4);
}

.money-back{
  text-align:center;
  color:#64748b;
  font-size:14px;
  margin-top:16px;
}

.divider{
  text-align:center;
  color:#94a3b8;
  margin:24px 0;
  position:relative;
}

.divider::before,
.divider::after{
  content:'';
  position:absolute;
  top:50%;
  width:45%;
  height:1px;
  background:#e2e8f0;
}

.divider::before{left:0}
.divider::after{right:0}

@media print{
  body{background:white}
  .container{box-shadow:none; margin:0; padding:20px; background:white}
  .topbar, .toolbar, .save-status, .premium-badge, button, .progress-bar, .progress-text{display:none!important}
  .section-header{cursor:default; background:white}
  .section-header::after{display:none}
  .section-content{display:block!important}
  .delete-btn{display:none}
  section{page-break-inside:avoid}
  section.locked{opacity:1; pointer-events:auto}
  section.locked::after{display:none}
  h1{font-size:24pt}
}

@media (max-width: 768px){
  .container{padding:20px; margin:20px}
  .topbar{grid-template-columns:1fr}
  .toolbar{grid-template-columns:1fr}
  h1{font-size:1.8em}
  .bg-text{font-size:60px}
  .bg-text.large{font-size:90px}
  .modal-content{padding:24px}
  .price-amount{font-size:36px}
  .price-container{flex-direction:column}
}
</style>
</head>

<body>

<div class="bg-text">LEGACY</div>
<div class="bg-text">PLANNING</div>
<div class="bg-text large">ESTATE</div>
<div class="bg-text">SECURE</div>
<div class="bg-text">FUTURE</div>

<!-- Premium Badge -->
<div class="premium-badge free-badge" id="premiumBadge">FREE TRIAL</div>

<!-- Auto-save indicator -->
<div class="save-status" id="saveStatus">
  <span class="save-dot"></span>
  <span id="saveText">Auto-saved</span>
</div>

<!-- Premium Upgrade Modal -->
<div class="modal" id="upgradeModal">
  <div class="modal-content">
    <button class="modal-close" onclick="closeUpgradeModal()">Ã—</button>
    
    <h2 class="modal-title">ğŸš€ Upgrade to Premium</h2>
    <p class="modal-subtitle">Unlock all features and secure your complete estate plan</p>
    
    <div class="trial-notice">
      â° <strong>3-Day Free Trial</strong> â€¢ Cancel Anytime â€¢ No Credit Card Required to Start
    </div>
    
    <div class="price-container">
      <div class="price-option recommended">
        <div class="recommended-badge">MOST POPULAR</div>
        <div class="price-label">Annual</div>
        <div class="price-amount">$59</div>
        <div class="price-period">per year</div>
        <div class="price-save">Save 18% ($13)</div>
        <button class="buy-button" onclick="subscribe('annual')">Start Free Trial</button>
      </div>
      
      <div class="price-option">
        <div class="price-label">Monthly</div>
        <div class="price-amount">$5.99</div>
        <div class="price-period">per month</div>
        <div style="height:28px"></div>
        <button class="buy-button" onclick="subscribe('monthly')">Start Free Trial</button>
      </div>
    </div>
    
    <ul class="features-list">
      <li>Unlock all 16 premium sections</li>
      <li>Import/Export your data as JSON</li>
      <li>Digital assets & cryptocurrency tracking</li>
      <li>Insurance & debt management</li>
      <li>Healthcare directives & living will</li>
      <li>Business succession planning</li>
      <li>Pet care & charitable giving</li>
      <li>Automatic cloud backup (coming soon)</li>
      <li>Priority customer support</li>
      <li>Regular updates & new features</li>
    </ul>
    
    <div class="divider">OR</div>
    
    <div style="text-align:center; margin:20px 0">
      <p style="color:#64748b; margin-bottom:12px">Already subscribed? Enter your subscription key:</p>
      <input type="text" id="subscriptionKey" placeholder="Enter Subscription Key" maxlength="24" style="text-align:center; text-transform:uppercase; letter-spacing:1px; font-family:monospace">
      <button onclick="activateSubscription()" style="margin-top:12px">Activate Subscription</button>
    </div>
    
    <p class="money-back">ğŸ’¯ 3-Day Free Trial â€¢ Cancel Anytime â€¢ 30-Day Money-Back Guarantee</p>
  </div>
</div>

<div class="container">

<h1>Estate Planner Pro</h1>
<div class="subtitle">Professional estate planning tool â€¢ Secure your legacy</div>

<div class="topbar">
  <select id="country">
    <option>Canada</option>
    <option>United States</option>
    <option>France</option>
    <option>Germany</option>
    <option>Spain</option>
    <option>Japan</option>
    <option>China</option>
    <option>South Korea</option>
    <option>India</option>
  </select>

  <select id="language">
    <option value="en">EN</option>
    <option value="fr">FR</option>
    <option value="de">DE</option>
    <option value="es">ES</option>
    <option value="ja">JA</option>
    <option value="zh">ä¸­æ–‡</option>
    <option value="ko">KO</option>
    <option value="hi">HI</option>
  </select>

  <input value="Version 2.0 Pro" disabled />
</div>

<div class="toolbar">
  <button onclick="openAll()" data-translate="openAll">ğŸ“‚ Open All</button>
  <button onclick="closeAll()" data-translate="closeAll">ğŸ“ Close All</button>
  <button onclick="window.print()" data-translate="print">ğŸ–¨ï¸ Print / PDF</button>
</div>

<div class="upgrade-notice" onclick="showUpgradeModal()">
  â­ <strong>FREE TRIAL:</strong> You have 7 basic sections. Start your 3-day free trial to unlock all 16 premium sections! Only $5.99/month after trial. Click here!
</div>

<!-- Progress bar -->
<div class="progress-bar">
  <div class="progress-fill" id="progressFill"></div>
</div>
<div class="progress-text" id="progressText">0% Complete</div>

<div class="toolbar">
  <button onclick="showUpgradeModal()" class="premium-btn" data-translate="upgrade">â­ Start Free Trial - $5.99/mo</button>
  <button onclick="clearData()" data-translate="clearAll">ğŸ—‘ï¸ Clear All</button>
</div>

<!-- FREE SECTIONS -->
<section class="open">
  <div class="section-header" onclick="toggle(this)">ğŸ“‹ Personal Information</div>
  <div class="section-content">
    <input placeholder="Full legal name" oninput="autoSave()">
    <input placeholder="Date of birth (e.g., Jan 15, 1980)" oninput="autoSave()">
    <input placeholder="Full residential address" oninput="autoSave()">
    <input placeholder="Phone number" oninput="autoSave()">
    <input placeholder="Email address" oninput="autoSave()">
  </div>
</section>

<section>
  <div class="section-header" onclick="toggle(this)">âš–ï¸ Executors</div>
  <div class="section-content" id="exec">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Executor full name" oninput="autoSave()">
      <input placeholder="Relationship & contact info" oninput="autoSave()">
      <textarea placeholder="Specific instructions or duties" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('exec')">â• Add Another Executor</button>
  </div>
</section>

<section>
  <div class="section-header" onclick="toggle(this)">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Children / Dependents</div>
  <div class="section-content" id="kids">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Child's full name & date of birth" oninput="autoSave()">
      <textarea placeholder="Guardian preferences, special needs, etc." oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('kids')">â• Add Another Child</button>
  </div>
</section>

<section>
  <div class="section-header" onclick="toggle(this)">ğŸ  Assets & Property</div>
  <div class="section-content" id="assets">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Asset description (property, accounts, investments)" oninput="autoSave()">
      <input placeholder="Estimated value (e.g., $250,000)" oninput="autoSave()">
      <textarea placeholder="Beneficiary instructions, account numbers, location" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('assets')">â• Add Another Asset</button>
  </div>
</section>

<section>
  <div class="section-header" onclick="toggle(this)">âš°ï¸ Funeral Wishes</div>
  <div class="section-content">
    <textarea class="large" placeholder="Burial vs cremation, service preferences, memorial wishes, organ donation" oninput="autoSave()"></textarea>
  </div>
</section>

<!-- FREE SECTIONS CONTINUED -->
<section>
  <div class="section-header" onclick="toggle(this)">ğŸ Beneficiaries & Inheritances</div>
  <div class="section-content" id="beneficiaries">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Beneficiary full name" oninput="autoSave()">
      <input placeholder="Relationship to you" oninput="autoSave()">
      <textarea placeholder="What they inherit (specific items, percentages, conditions)" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('beneficiaries')">â• Add Another Beneficiary</button>
  </div>
</section>

<!-- PREMIUM SECTIONS (LOCKED) -->
<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ’» Digital Assets & Accounts ğŸ”’</div>
  <div class="section-content" id="digital">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Type (Email, Social Media, Crypto, Cloud Storage, etc.)" oninput="autoSave()">
      <input placeholder="Account name or username" oninput="autoSave()">
      <textarea placeholder="Access instructions, passwords location, 2FA info" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('digital')">â• Add Another Account</button>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ›¡ï¸ Insurance Policies ğŸ”’</div>
  <div class="section-content" id="insurance">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Type (Life, Health, Property, Vehicle, etc.)" oninput="autoSave()">
      <input placeholder="Insurance company name" oninput="autoSave()">
      <input placeholder="Policy number & beneficiaries" oninput="autoSave()">
      <textarea placeholder="Coverage details, contact info, premium amount" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('insurance')">â• Add Another Policy</button>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ’³ Debts & Liabilities ğŸ”’</div>
  <div class="section-content" id="debts">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Type (Mortgage, Car Loan, Credit Card, Personal Loan, etc.)" oninput="autoSave()">
      <input placeholder="Outstanding amount" oninput="autoSave()">
      <textarea placeholder="Creditor name, account number, payment instructions" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('debts')">â• Add Another Debt</button>
  </div>
</section>

<section>
  <div class="section-header" onclick="toggle(this)">ğŸ¥ Healthcare Directives</div>
  <div class="section-content" id="healthcare">
    <div style="background:#eff6ff; padding:12px; border-radius:6px; margin-bottom:16px; font-size:13px; color:#1e40af;">
      <strong>ğŸ“‹ Important:</strong> Healthcare directives ensure your medical wishes are honored if you cannot speak for yourself. Consider consulting with your doctor and attorney.
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Living Will & End-of-Life Wishes</h4>
      <textarea placeholder="Life-sustaining treatment preferences: Do you want CPR, mechanical ventilation, feeding tubes, dialysis, or other life support measures? Under what circumstances?" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">DNR (Do Not Resuscitate) Orders</h4>
      <select oninput="autoSave()">
        <option value="">Select preference</option>
        <option value="full-code">Full Code - Perform all resuscitation efforts</option>
        <option value="dnr">DNR - Do Not Resuscitate</option>
        <option value="dni">DNI - Do Not Intubate</option>
        <option value="dnr-dni">DNR & DNI - Neither resuscitate nor intubate</option>
        <option value="comfort-care">Comfort Care Only</option>
        <option value="discuss">Discuss with family/healthcare proxy</option>
      </select>
      <textarea placeholder="Additional DNR instructions or conditions" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Healthcare Power of Attorney / Proxy</h4>
      <input placeholder="Primary healthcare proxy name & relationship" oninput="autoSave()">
      <input placeholder="Primary proxy phone number & email" oninput="autoSave()">
      <input placeholder="Alternate healthcare proxy name & contact" oninput="autoSave()">
      <textarea placeholder="Special instructions for your healthcare proxy (pain management preferences, communication wishes, etc.)" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Organ & Tissue Donation</h4>
      <select oninput="autoSave()">
        <option value="">Select preference</option>
        <option value="donate-all">Yes - Donate all organs and tissues</option>
        <option value="donate-some">Yes - Donate specific organs only (specify below)</option>
        <option value="donate-research">Yes - For transplant or medical research</option>
        <option value="no-donation">No - Do not donate</option>
        <option value="family-decides">Let family decide</option>
      </select>
      <textarea placeholder="Specific organs to donate (heart, lungs, liver, kidneys, corneas, skin, bone, etc.) or any restrictions" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Medical Treatment Preferences</h4>
      <textarea placeholder="Pain management preferences: What level of pain medication is acceptable? Concerns about addiction vs. comfort?" oninput="autoSave()"></textarea>
      <textarea placeholder="Mental health treatment preferences: Electroconvulsive therapy (ECT), psychiatric medications, involuntary commitment preferences" oninput="autoSave()"></textarea>
      <textarea placeholder="Pregnancy-related directives (if applicable): Wishes regarding care if pregnant and incapacitated" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Religious & Cultural Considerations</h4>
      <textarea placeholder="Religious beliefs affecting medical care: Blood transfusions, specific treatments, prayer, last rites, religious counseling" oninput="autoSave()"></textarea>
      <textarea placeholder="Cultural practices to honor: Traditional healing practices, family involvement in decisions, dietary restrictions" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Quality of Life Definitions</h4>
      <textarea placeholder="Define what quality of life means to you: Ability to communicate, recognize loved ones, live independently, avoid permanent disability, etc." oninput="autoSave()"></textarea>
      <textarea placeholder="Conditions under which you would NOT want life prolonged (permanent unconsciousness, severe dementia, terminal illness, etc.)" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Preferred Medical Facilities & Doctors</h4>
      <input placeholder="Primary care physician name & contact" oninput="autoSave()">
      <input placeholder="Preferred hospital or medical facility" oninput="autoSave()">
      <input placeholder="Specialists (cardiologist, oncologist, etc.) & contact info" oninput="autoSave()">
      <textarea placeholder="Hospitals or facilities to AVOID and why" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Medications & Allergies</h4>
      <textarea placeholder="Current medications & dosages" oninput="autoSave()"></textarea>
      <textarea placeholder="Known allergies to medications, foods, latex, etc." oninput="autoSave()"></textarea>
      <textarea placeholder="Medications you refuse to take and why" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Mental Health & Dementia Directives</h4>
      <textarea placeholder="Preferences if diagnosed with Alzheimer's or dementia: When to stop curative treatment, residential care preferences, participation in research studies" oninput="autoSave()"></textarea>
      <textarea placeholder="Mental health crisis directives: Preferred psychiatric facilities, medications that have/haven't worked, people to contact" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Documentation & Legal Information</h4>
      <input placeholder="Location of original advance directive documents" oninput="autoSave()">
      <input placeholder="Date advance directive was signed" oninput="autoSave()">
      <input placeholder="Attorney who prepared documents (name & contact)" oninput="autoSave()">
      <textarea placeholder="Who has copies: List all people and institutions (doctors, hospitals, family members) who have copies of your advance directives" oninput="autoSave()"></textarea>
    </div>
    
    <div class="repeat">
      <h4 style="margin:0 0 12px 0; color:#1e293b; font-size:15px;">Additional Healthcare Wishes</h4>
      <textarea class="large" placeholder="Any other medical preferences, concerns, or instructions: Autopsy preferences, body donation to science, experimental treatments, home care vs. facility care, visitors during hospitalization, music/environment preferences, etc." oninput="autoSave()"></textarea>
    </div>
    
    <div style="background:#fef3c7; padding:12px; border-radius:6px; margin-top:16px; font-size:13px; color:#92400e;">
      <strong>âš ï¸ Legal Notice:</strong> This is for informational purposes only. To make your healthcare directives legally binding, you must complete official advance directive forms for your state/country and have them properly witnessed or notarized. Consult with an attorney and your healthcare provider.
    </div>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ‘” Professional Contacts ğŸ”’</div>
  <div class="section-content" id="professionals">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Type (Attorney, Accountant, Financial Advisor, Doctor, etc.)" oninput="autoSave()">
      <input placeholder="Name & firm" oninput="autoSave()">
      <textarea placeholder="Phone, email, address, account numbers" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('professionals')">â• Add Another Contact</button>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ¢ Business Interests ğŸ”’</div>
  <div class="section-content">
    <textarea class="large" placeholder="Business ownership details, partnership agreements, succession plans, buy-sell agreements, business contacts" oninput="autoSave()"></textarea>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ¾ Pet Care Instructions ğŸ”’</div>
  <div class="section-content" id="pets">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Pet name" oninput="autoSave()">
      <input placeholder="Type & breed" oninput="autoSave()">
      <textarea placeholder="Vet info, preferred caregiver, care instructions, funds allocated" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('pets')">â• Add Another Pet</button>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">â¤ï¸ Charitable Giving ğŸ”’</div>
  <div class="section-content" id="charitable">
    <div class="repeat">
      <button class="delete-btn" onclick="deleteRow(this)">âœ• Delete</button>
      <input placeholder="Charity or organization name" oninput="autoSave()">
      <input placeholder="Amount or percentage to donate" oninput="autoSave()">
      <textarea placeholder="Purpose, contact info, memorial gift preferences" oninput="autoSave()"></textarea>
    </div>
    <button onclick="addRow('charitable')">â• Add Another Charity</button>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ’Œ Personal Messages & Legacy ğŸ”’</div>
  <div class="section-content">
    <textarea class="large" placeholder="Letters to loved ones, ethical will, values and life lessons, family history to preserve" oninput="autoSave()"></textarea>
  </div>
</section>

<section class="locked">
  <div class="section-header" onclick="showUpgradeModal()">ğŸ“ Additional Notes ğŸ”’</div>
  <div class="section-content">
    <textarea class="large" placeholder="Any other important information, safe combinations, hidden valuables" oninput="autoSave()"></textarea>
  </div>
</section>

</div>

<script>
/* ---------- SUBSCRIPTION SYSTEM ---------- */
let isSubscribed = false;
let subscriptionType = null; // 'monthly' or 'annual'

// Valid subscription keys (in production, validate server-side with Stripe!)
const validSubscriptions = [
  'SUB-MONTH-2024-001',
  'SUB-MONTH-2024-002',
  'SUB-ANNUAL-2024-001',
  'SUB-ANNUAL-2024-002',
  // Add more as you generate them
];

function checkSubscriptionStatus(){
  const savedSub = localStorage.getItem('estatePlannerSubscription');
  const subExpiry = localStorage.getItem('estatePlannerSubExpiry');
  
  if(savedSub && validSubscriptions.includes(savedSub)){
    // Check if subscription is still valid (not expired)
    if(subExpiry){
      const expiryDate = new Date(subExpiry);
      if(expiryDate > new Date()){
        activatePremiumFeatures(savedSub.includes('ANNUAL') ? 'annual' : 'monthly');
      } else {
        // Subscription expired
        showRenewalNotice();
      }
    } else {
      activatePremiumFeatures(savedSub.includes('ANNUAL') ? 'annual' : 'monthly');
    }
  }
}

function activateSubscription(){
  const key = document.getElementById('subscriptionKey').value.trim().toUpperCase();
  
  if(validSubscriptions.includes(key)){
    const type = key.includes('ANNUAL') ? 'annual' : 'monthly';
    const expiryDate = new Date();
    
    // Set expiry date based on subscription type
    if(type === 'annual'){
      expiryDate.setFullYear(expiryDate.getFullYear() + 1);
    } else {
      expiryDate.setMonth(expiryDate.getMonth() + 1);
    }
    
    localStorage.setItem('estatePlannerSubscription', key);
    localStorage.setItem('estatePlannerSubExpiry', expiryDate.toISOString());
    
    activatePremiumFeatures(type);
    closeUpgradeModal();
    
    const status = document.getElementById('saveStatus');
    const text = document.getElementById('saveText');
    status.classList.add('saved', 'show');
    text.textContent = 'ğŸ‰ Subscription Activated!';
    setTimeout(() => status.classList.remove('show'), 3000);
  } else {
    alert('âŒ Invalid subscription key. Please check and try again, or start your free trial.');
    document.getElementById('subscriptionKey').style.animation = 'shake 0.5s';
    setTimeout(() => {
      document.getElementById('subscriptionKey').style.animation = '';
    }, 500);
  }
}

function activatePremiumFeatures(type){
  isSubscribed = true;
  subscriptionType = type;
  
  // Unlock all sections
  document.querySelectorAll('section.locked').forEach(section => {
    section.classList.remove('locked');
  });
  
  // Update badge
  const badge = document.getElementById('premiumBadge');
  badge.textContent = type === 'annual' ? 'â­ ANNUAL MEMBER' : 'â­ PREMIUM MEMBER';
  badge.classList.remove('free-badge');
  badge.classList.add('subscription-active');
  
  // Update notice
  const notice = document.querySelector('.upgrade-notice');
  if(notice){
    notice.style.display = 'none';
  }
  
  // Update upgrade button
  const upgradeBtn = document.querySelector('.premium-btn');
  if(upgradeBtn){
    upgradeBtn.textContent = 'âœ“ Subscription Active';
    upgradeBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
    upgradeBtn.onclick = showManageSubscription;
    upgradeBtn.style.animation = 'none';
  }
}

function subscribe(plan){
  // In production, integrate with Stripe Checkout
  console.log('Starting subscription:', plan);
  
  // For demo purposes, simulate successful subscription
  alert(`ğŸš€ Redirecting to checkout...\n\nPlan: ${plan === 'annual' ? 'Annual ($59/year)' : 'Monthly ($5.99/month)'}\n\nFor demo: Use key "${plan === 'annual' ? 'SUB-ANNUAL-2024-001' : 'SUB-MONTH-2024-001'}"`);
  
  // In production, redirect to Stripe:
  // window.location.href = `https://checkout.stripe.com/your-${plan}-plan-link`;
}

function showManageSubscription(){
  alert('Subscription Management\n\nYour subscription is active!\n\nNext billing: ' + 
        new Date(localStorage.getItem('estatePlannerSubExpiry')).toLocaleDateString() +
        '\n\nTo manage or cancel, contact support@estateplannerpro.com');
}

function showRenewalNotice(){
  alert('âš ï¸ Your subscription has expired\n\nClick OK to renew and continue using all premium features.');
  showUpgradeModal();
}

function showUpgradeModal(){
  if(!isSubscribed){
    document.getElementById('upgradeModal').classList.add('show');
  }
}

function closeUpgradeModal(){
  document.getElementById('upgradeModal').classList.remove('show');
}

/* ---------- CORE ENGINE ---------- */
let saveTimeout;

/* ---------- AUTO-SAVE ---------- */
function autoSave(){
  const status = document.getElementById('saveStatus');
  const text = document.getElementById('saveText');
  
  status.classList.remove('saved');
  status.classList.add('saving', 'show');
  text.textContent = 'Saving...';
  
  clearTimeout(saveTimeout);
  saveTimeout = setTimeout(() => {
    saveToLocalStorage();
    status.classList.remove('saving');
    status.classList.add('saved');
    text.textContent = 'Auto-saved';
    
    setTimeout(() => {
      status.classList.remove('show');
    }, 2000);
    
    updateProgress();
  }, 1000);
}

function saveToLocalStorage(){
  const data = collectFormData();
  localStorage.setItem('estatePlan', JSON.stringify(data));
}

function loadFromLocalStorage(){
  const saved = localStorage.getItem('estatePlan');
  if(saved){
    try{
      const data = JSON.parse(saved);
      populateForm(data);
      updateProgress();
    }catch(e){
      console.error('Failed to load saved data:', e);
    }
  }
}

/* ---------- PROGRESS TRACKING ---------- */
function updateProgress(){
  const allInputs = document.querySelectorAll('input:not([type="file"]):not([disabled]), textarea');
  const filled = Array.from(allInputs).filter(el => el.value.trim() !== '').length;
  const total = allInputs.length;
  const percent = Math.round((filled / total) * 100);
  
  document.getElementById('progressFill').style.width = percent + '%';
  
  // Use translation if available
  if (typeof T !== 'undefined' && T[currentLang]) {
    const trans = T[currentLang];
    document.getElementById('progressText').textContent = `${percent}% ${trans.complete} (${filled}/${total} ${trans.fields})`;
  } else {
    document.getElementById('progressText').textContent = percent + '% Complete (' + filled + '/' + total + ' fields)';
  }
}

/* ---------- DATA COLLECTION ---------- */
function collectFormData(){
  const data = {
    version: "2.0",
    subscribed: isSubscribed,
    subscriptionType: subscriptionType,
    exportDate: new Date().toISOString(),
    country: document.getElementById('country').value,
    fields: {}
  };
  
  // Collect all sections
  document.querySelectorAll('section').forEach(section => {
    const header = section.querySelector('.section-header');
    const content = section.querySelector('.section-content');
    
    if(!content) return;
    
    const sectionName = header.textContent.replace('ğŸ”’', '').trim();
    data.fields[sectionName] = [];
    
    // Collect inputs from this section
    content.querySelectorAll('input:not([disabled]), textarea').forEach(input => {
      data.fields[sectionName].push({
        placeholder: input.placeholder,
        value: input.value
      });
    });
  });
  
  return data;
}

/* ---------- POPULATE FORM ---------- */
function populateForm(data){
  if(data.country) document.getElementById('country').value = data.country;
}

/* ---------- ROWS ---------- */
function addRow(id){
  const c=document.getElementById(id);
  const row=c.querySelector(".repeat").cloneNode(true);
  row.querySelectorAll("input,textarea").forEach(i=>i.value="");
  c.insertBefore(row,c.lastElementChild);
  autoSave();
}

function deleteRow(btn){
  const container = btn.closest('.section-content');
  const repeats = container.querySelectorAll('.repeat');
  
  if(repeats.length > 1){
    btn.closest('.repeat').remove();
    autoSave();
  } else {
    alert('Cannot delete the last item. At least one entry is required.');
  }
}

/* ---------- UI ---------- */
function toggle(h){
  h.parentElement.classList.toggle("open");
}

function openAll(){
  document.querySelectorAll("section").forEach(s=>s.classList.add("open"));
}

function closeAll(){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("open"));
}

function clearData() {
  if (confirm('âš ï¸ WARNING: This will permanently delete all your entered data.\n\nAre you absolutely sure you want to clear everything?')) {
    document.querySelectorAll('input:not([type="file"]):not([disabled]), textarea').forEach(el => {
      el.value = '';
    });
    localStorage.removeItem('estatePlan');
    updateProgress();
    
    const status = document.getElementById('saveStatus');
    const text = document.getElementById('saveText');
    status.classList.add('show');
    text.textContent = 'All data cleared';
    setTimeout(() => status.classList.remove('show'), 3000);
  }
}

/* ---------- INIT ---------- */
checkSubscriptionStatus();
loadFromLocalStorage();
updateProgress();

// Close modal on outside click
document.getElementById('upgradeModal').addEventListener('click', function(e){
  if(e.target === this){
    closeUpgradeModal();
  }
});

/* ---------- LANGUAGE SYSTEM ---------- */

// Country to language mapping
const countryLang = {
  "Canada": "en",
  "United States": "en",
  "France": "fr",
  "Germany": "de",
  "Spain": "es",
  "Japan": "ja",
  "China": "zh",
  "South Korea": "ko",
  "India": "hi"
};

// Comprehensive translations
const T = {
  en: {
    title: "Estate Planner Pro",
    subtitle: "Professional estate planning tool â€¢ Secure your legacy",
    upgradeNotice: "â­ FREE TRIAL: You have 7 basic sections. Start your 3-day free trial to unlock all 16 premium sections! Only $5.99/month after trial. Click here!",
    openAll: "ğŸ“‚ Open All",
    closeAll: "ğŸ“ Close All",
    print: "ğŸ–¨ï¸ Print / PDF",
    upgrade: "â­ Start Free Trial - $5.99/mo",
    clearAll: "ğŸ—‘ï¸ Clear All",
    complete: "Complete",
    fields: "fields"
  },
  fr: {
    title: "Planificateur Successoral Pro",
    subtitle: "Outil professionnel de planification successorale â€¢ SÃ©curisez votre hÃ©ritage",
    upgradeNotice: "â­ ESSAI GRATUIT: Vous avez 7 sections de base. Commencez votre essai gratuit de 3 jours pour dÃ©bloquer les 16 sections premium! Seulement 5,99$/mois aprÃ¨s l'essai. Cliquez ici!",
    openAll: "ğŸ“‚ Tout Ouvrir",
    closeAll: "ğŸ“ Tout Fermer",
    print: "ğŸ–¨ï¸ Imprimer / PDF",
    upgrade: "â­ Commencer l'Essai Gratuit - 5,99$/mois",
    clearAll: "ğŸ—‘ï¸ Tout Effacer",
    complete: "TerminÃ©",
    fields: "champs"
  },
  de: {
    title: "Nachlassplaner Pro",
    subtitle: "Professionelles Nachlassplanungstool â€¢ Sichern Sie Ihr Erbe",
    upgradeNotice: "â­ KOSTENLOSE TESTVERSION: Sie haben 7 Basissektionen. Starten Sie Ihre 3-tÃ¤gige kostenlose Testversion, um alle 16 Premium-Sektionen freizuschalten! Nur 5,99â‚¬/Monat nach der Testversion. Hier klicken!",
    openAll: "ğŸ“‚ Alle Ã–ffnen",
    closeAll: "ğŸ“ Alle SchlieÃŸen",
    print: "ğŸ–¨ï¸ Drucken / PDF",
    upgrade: "â­ Kostenlose Testversion Starten - 5,99â‚¬/Monat",
    clearAll: "ğŸ—‘ï¸ Alles LÃ¶schen",
    complete: "Fertig",
    fields: "Felder"
  },
  es: {
    title: "Planificador Patrimonial Pro",
    subtitle: "Herramienta profesional de planificaciÃ³n patrimonial â€¢ Asegure su legado",
    upgradeNotice: "â­ PRUEBA GRATUITA: Tiene 7 secciones bÃ¡sicas. Â¡Comience su prueba gratuita de 3 dÃ­as para desbloquear las 16 secciones premium! Solo $5.99/mes despuÃ©s de la prueba. Â¡Haga clic aquÃ­!",
    openAll: "ğŸ“‚ Abrir Todo",
    closeAll: "ğŸ“ Cerrar Todo",
    print: "ğŸ–¨ï¸ Imprimir / PDF",
    upgrade: "â­ Comenzar Prueba Gratuita - $5.99/mes",
    clearAll: "ğŸ—‘ï¸ Borrar Todo",
    complete: "Completo",
    fields: "campos"
  },
  ja: {
    title: "éºç”£ãƒ—ãƒ©ãƒ³ãƒŠãƒ¼ãƒ—ãƒ­",
    subtitle: "ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«éºç”£è¨ˆç”»ãƒ„ãƒ¼ãƒ« â€¢ ã‚ãªãŸã®éºç”£ã‚’å®ˆã‚‹",
    upgradeNotice: "â­ ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«: 7ã¤ã®åŸºæœ¬ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚3æ—¥é–“ã®ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ã‚’é–‹å§‹ã—ã¦ã€16ã®ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ã™ã¹ã¦ãƒ­ãƒƒã‚¯è§£é™¤ã—ã¦ãã ã•ã„ï¼ãƒˆãƒ©ã‚¤ã‚¢ãƒ«å¾Œã¯æœˆé¡5.99ãƒ‰ãƒ«ã®ã¿ã€‚ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ï¼",
    openAll: "ğŸ“‚ ã™ã¹ã¦é–‹ã",
    closeAll: "ğŸ“ ã™ã¹ã¦é–‰ã˜ã‚‹",
    print: "ğŸ–¨ï¸ å°åˆ· / PDF",
    upgrade: "â­ ç„¡æ–™ãƒˆãƒ©ã‚¤ã‚¢ãƒ«ã‚’é–‹å§‹ - æœˆé¡5.99ãƒ‰ãƒ«",
    clearAll: "ğŸ—‘ï¸ ã™ã¹ã¦ã‚¯ãƒªã‚¢",
    complete: "å®Œäº†",
    fields: "ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰"
  },
  zh: {
    title: "é—äº§è§„åˆ’ä¸“ä¸šç‰ˆ",
    subtitle: "ä¸“ä¸šé—äº§è§„åˆ’å·¥å…· â€¢ ä¿æŠ¤æ‚¨çš„é—äº§",
    upgradeNotice: "â­ å…è´¹è¯•ç”¨: æ‚¨æœ‰7ä¸ªåŸºæœ¬éƒ¨åˆ†ã€‚å¼€å§‹3å¤©å…è´¹è¯•ç”¨ä»¥è§£é”æ‰€æœ‰16ä¸ªé«˜çº§éƒ¨åˆ†ï¼è¯•ç”¨åä»…éœ€æ¯æœˆ5.99ç¾å…ƒã€‚ç‚¹å‡»è¿™é‡Œï¼",
    openAll: "ğŸ“‚ å…¨éƒ¨æ‰“å¼€",
    closeAll: "ğŸ“ å…¨éƒ¨å…³é—­",
    print: "ğŸ–¨ï¸ æ‰“å° / PDF",
    upgrade: "â­ å¼€å§‹å…è´¹è¯•ç”¨ - æ¯æœˆ5.99ç¾å…ƒ",
    clearAll: "ğŸ—‘ï¸ å…¨éƒ¨æ¸…é™¤",
    complete: "å®Œæˆ",
    fields: "å­—æ®µ"
  },
  ko: {
    title: "ìƒì† í”Œë˜ë„ˆ í”„ë¡œ",
    subtitle: "ì „ë¬¸ ìƒì† ê³„íš ë„êµ¬ â€¢ ìœ ì‚°ì„ ë³´í˜¸í•˜ì„¸ìš”",
    upgradeNotice: "â­ ë¬´ë£Œ ì²´í—˜: 7ê°œì˜ ê¸°ë³¸ ì„¹ì…˜ì´ ìˆìŠµë‹ˆë‹¤. 3ì¼ ë¬´ë£Œ ì²´í—˜ì„ ì‹œì‘í•˜ì—¬ 16ê°œì˜ í”„ë¦¬ë¯¸ì—„ ì„¹ì…˜ì„ ëª¨ë‘ ì ê¸ˆ í•´ì œí•˜ì„¸ìš”! ì²´í—˜ í›„ ì›” $5.99ë§Œ. ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì„¸ìš”!",
    openAll: "ğŸ“‚ ëª¨ë‘ ì—´ê¸°",
    closeAll: "ğŸ“ ëª¨ë‘ ë‹«ê¸°",
    print: "ğŸ–¨ï¸ ì¸ì‡„ / PDF",
    upgrade: "â­ ë¬´ë£Œ ì²´í—˜ ì‹œì‘ - ì›” $5.99",
    clearAll: "ğŸ—‘ï¸ ëª¨ë‘ ì§€ìš°ê¸°",
    complete: "ì™„ë£Œ",
    fields: "í•„ë“œ"
  },
  hi: {
    title: "à¤¸à¤‚à¤ªà¤¤à¥à¤¤à¤¿ à¤¯à¥‹à¤œà¤¨à¤¾à¤•à¤¾à¤° à¤ªà¥à¤°à¥‹",
    subtitle: "à¤ªà¥‡à¤¶à¥‡à¤µà¤° à¤¸à¤‚à¤ªà¤¤à¥à¤¤à¤¿ à¤¯à¥‹à¤œà¤¨à¤¾ à¤‰à¤ªà¤•à¤°à¤£ â€¢ à¤…à¤ªà¤¨à¥€ à¤µà¤¿à¤°à¤¾à¤¸à¤¤ à¤•à¥‹ à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤•à¤°à¥‡à¤‚",
    upgradeNotice: "â­ à¤®à¥à¤«à¥à¤¤ à¤ªà¤°à¥€à¤•à¥à¤·à¤£: à¤†à¤ªà¤•à¥‡ à¤ªà¤¾à¤¸ 7 à¤¬à¥à¤¨à¤¿à¤¯à¤¾à¤¦à¥€ à¤…à¤¨à¥à¤­à¤¾à¤— à¤¹à¥ˆà¤‚à¥¤ à¤¸à¤­à¥€ 16 à¤ªà¥à¤°à¥€à¤®à¤¿à¤¯à¤® à¤…à¤¨à¥à¤­à¤¾à¤—à¥‹à¤‚ à¤•à¥‹ à¤…à¤¨à¤²à¥‰à¤• à¤•à¤°à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤…à¤ªà¤¨à¤¾ 3-à¤¦à¤¿à¤µà¤¸à¥€à¤¯ à¤®à¥à¤«à¥à¤¤ à¤ªà¤°à¥€à¤•à¥à¤·à¤£ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚! à¤ªà¤°à¥€à¤•à¥à¤·à¤£ à¤•à¥‡ à¤¬à¤¾à¤¦ à¤•à¥‡à¤µà¤² $5.99/à¤®à¤¾à¤¹à¥¤ à¤¯à¤¹à¤¾à¤ à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚!",
    openAll: "ğŸ“‚ à¤¸à¤­à¥€ à¤–à¥‹à¤²à¥‡à¤‚",
    closeAll: "ğŸ“ à¤¸à¤­à¥€ à¤¬à¤‚à¤¦ à¤•à¤°à¥‡à¤‚",
    print: "ğŸ–¨ï¸ à¤ªà¥à¤°à¤¿à¤‚à¤Ÿ / PDF",
    upgrade: "â­ à¤®à¥à¤«à¥à¤¤ à¤ªà¤°à¥€à¤•à¥à¤·à¤£ à¤¶à¥à¤°à¥‚ à¤•à¤°à¥‡à¤‚ - $5.99/à¤®à¤¾à¤¹",
    clearAll: "ğŸ—‘ï¸ à¤¸à¤­à¥€ à¤¸à¤¾à¤«à¤¼ à¤•à¤°à¥‡à¤‚",
    complete: "à¤ªà¥‚à¤°à¥à¤£",
    fields: "à¤•à¥à¤·à¥‡à¤¤à¥à¤°"
  }
};

function applyLanguage(lang) {
  console.log('applyLanguage called with:', lang);
  currentLang = T[lang] ? lang : "en";
  console.log('currentLang set to:', currentLang);
  document.getElementById('language').value = currentLang;
  
  const trans = T[currentLang];
  console.log('Translations:', trans);
  
  // Update main text elements
  const h1 = document.querySelector('h1');
  const subtitle = document.querySelector('.subtitle');
  
  if (h1) h1.textContent = trans.title;
  if (subtitle) subtitle.textContent = trans.subtitle;
  
  // Update upgrade notice
  const upgradeNotice = document.querySelector('.upgrade-notice');
  if (upgradeNotice) {
    upgradeNotice.innerHTML = trans.upgradeNotice;
  }
  
  // Update all buttons with data-translate attribute
  document.querySelectorAll('[data-translate]').forEach(btn => {
    const key = btn.getAttribute('data-translate');
    if (trans[key]) {
      console.log('Translating button:', key, 'to:', trans[key]);
      btn.textContent = trans[key];
    }
  });
  
  // Update progress text
  updateProgress();
  
  console.log('Translation complete!');
}

function updateProgressText() {
  const trans = T[currentLang];
  const progressText = document.getElementById('progressText');
  if (progressText) {
    const text = progressText.textContent;
    const match = text.match(/(\d+)%.*\((\d+)\/(\d+)/);
    if (match) {
      progressText.textContent = `${match[1]}% ${trans.complete} (${match[2]}/${match[3]} ${trans.fields})`;
    }
  }
}

// Event listeners for country and language changes - wait for DOM to be ready
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM fully loaded - setting up event listeners');
  
  const countrySelect = document.getElementById('country');
  const languageSelect = document.getElementById('language');
  
  if (countrySelect) {
    console.log('Country select found, adding listener');
    countrySelect.addEventListener('change', function() {
      console.log('Country changed to:', this.value);
      const selectedCountry = this.value;
      const newLang = countryLang[selectedCountry] || "en";
      console.log('Mapped to language:', newLang);
      applyLanguage(newLang);
      autoSave();
    });
  } else {
    console.error('Country select NOT found!');
  }
  
  if (languageSelect) {
    console.log('Language select found, adding listener');
    languageSelect.addEventListener('change', function() {
      console.log('Language manually changed to:', this.value);
      applyLanguage(this.value);
      autoSave();
    });
  } else {
    console.error('Language select NOT found!');
  }
  let userSelectedLanguage = false;

  // Initialize with English
  console.log('Initializing with English...');
});
</script>

</body>
</html>
