<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Estate Plan</title>

<style>
:root{
  --jam-dark:#2b1417;
  --jam-mid:#4a1f26;
  --paper:#ffffff;
  --border:#d2d6da;
  --heading:#2f4f4f;
  --muted:#6b7280;
}

body{
  margin:0;
  font-family:"Times New Roman", Georgia, serif;
  font-size:18px;
  line-height:1.65;
  background:radial-gradient(circle at top, var(--jam-mid), var(--jam-dark));
  color:#1f2933;
}

.container{
  max-width:1150px;
  margin:50px auto;
  padding:48px 36px 140px;
  background:var(--paper);
  border-radius:18px;
  box-shadow:0 22px 50px rgba(0,0,0,0.35);
}

h1{
  text-align:center;
  font-size:36px;
  color:var(--heading);
  margin:0;
}

.subtitle{
  text-align:center;
  color:var(--muted);
  margin-top:10px;
}

.toolbar{
  display:flex;
  justify-content:center;
  gap:12px;
  flex-wrap:wrap;
  margin:28px 0;
}

select, button{
  padding:12px 18px;
  font-size:16px;
  font-family:inherit;
  border-radius:8px;
  border:1px solid var(--border);
  background:#f9fafb;
}

button{ cursor:pointer; }

section{
  border:1px solid var(--border);
  border-radius:12px;
  margin-bottom:26px;
}

.section-header{
  padding:20px 24px;
  border-bottom:1px solid var(--border);
}
.section-header h2{
  margin:0;
  font-size:24px;
  color:var(--heading);
}

.section-content{
  padding:24px;
}

input, textarea{
  width:100%;
  padding:16px;
  margin-bottom:18px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#fafafa;
  font-size:18px;
  font-family:inherit;
}

textarea.large{ min-height:420px; }
textarea.medium{ min-height:260px; }

/* PRINT */
.print-only{ display:none; }
@media print{
  body{ background:#fff; }
  .container{ display:none; }
  .print-only{ display:block; }
  footer{
    position:fixed;
    bottom:10mm;
    width:100%;
    text-align:center;
    font-size:12px;
  }
  footer::after{ content:"Page " counter(page); }
}
</style>
</head>

<body>

<!-- PRINT COVER -->
<div class="print-only">
  <div style="margin-top:100px;text-align:center;">
    <h1 id="printTitle"></h1>
    <p><b id="printPrepared"></b> <span id="printName">—</span></p>
    <p><b id="printCountryLabel"></b> <span id="printCountry">—</span></p>
    <p><b id="printDateLabel"></b> <span id="printDate">—</span></p>
  </div>
</div>
<footer class="print-only"></footer>

<div class="container">

<h1 id="title"></h1>
<p class="subtitle" id="subtitle"></p>

<div class="toolbar">
  <!-- COUNTRY (SOURCE OF TRUTH) -->
  <select id="country">
    <option value="">Select country</option>
    <option>Canada</option>
    <option>United States</option>
    <option>United Kingdom</option>
    <option>France</option>
    <option>Germany</option>
    <option>Italy</option>
    <option>Spain</option>
  </select>

  <button id="btnPrint" onclick="window.print()"></button>
</div>

<section>
  <div class="section-header"><h2 data-i18n="personal"></h2></div>
  <div class="section-content">
    <input data-key="name" data-ph="name">
    <input data-key="dob" data-ph="dob">
    <input data-key="address" data-ph="address">
  </div>
</section>

<section>
  <div class="section-header"><h2 data-i18n="executor"></h2></div>
  <div class="section-content">
    <input data-key="executor" data-ph="executor">
    <textarea class="medium" data-key="executor_notes" data-ph="executor_notes"></textarea>
  </div>
</section>

<section>
  <div class="section-header"><h2 data-i18n="assets"></h2></div>
  <div class="section-content">
    <textarea class="large" data-key="assets" data-ph="assets"></textarea>
  </div>
</section>

<section>
  <div class="section-header"><h2 data-i18n="final"></h2></div>
  <div class="section-content">
    <textarea class="large" data-key="final_wishes" data-ph="final_wishes"></textarea>
  </div>
</section>

<section>
  <div class="section-header"><h2 data-i18n="notes"></h2></div>
  <div class="section-content">
    <textarea class="large" data-key="notes" data-ph="notes"></textarea>
  </div>
</section>

</div>

<script>
const STORE = "estate_plan_country_language";

/* TRANSLATIONS */
const translations = {
  en:{
    title:"My Estate Plan",
    subtitle:"Personal estate planning record · Not a legal document",
    personal:"Personal Information",
    executor:"Executor",
    assets:"Assets",
    final:"Final Wishes",
    notes:"Additional Notes",
    print:"Print / Save PDF",
    prepared:"Prepared for:",
    country:"Country:",
    date:"Date:",
    ph:{
      name:"Full legal name",
      dob:"Date of birth",
      address:"Address",
      executor:"Executor name",
      executor_notes:"Executor instructions",
      assets:"Assets and property",
      final_wishes:"Final wishes",
      notes:"Additional notes"
    }
  },
  fr:{
    title:"Mon plan successoral",
    subtitle:"Dossier personnel · Document non juridique",
    personal:"Renseignements personnels",
    executor:"Liquidateur",
    assets:"Biens",
    final:"Dernières volontés",
    notes:"Notes supplémentaires",
    print:"Imprimer / PDF",
    prepared:"Préparé pour :",
    country:"Pays :",
    date:"Date :",
    ph:{
      name:"Nom légal complet",
      dob:"Date de naissance",
      address:"Adresse",
      executor:"Nom du liquidateur",
      executor_notes:"Instructions au liquidateur",
      assets:"Biens et propriétés",
      final_wishes:"Dernières volontés",
      notes:"Notes supplémentaires"
    }
  },
  de:{
    title:"Mein Nachlassplan",
    subtitle:"Persönliches Dokument · Kein Rechtsdokument",
    personal:"Persönliche Angaben",
    executor:"Testamentsvollstrecker",
    assets:"Vermögen",
    final:"Letzte Wünsche",
    notes:"Zusätzliche Notizen",
    print:"Drucken / PDF",
    prepared:"Vorbereitet für:",
    country:"Land:",
    date:"Datum:",
    ph:{
      name:"Vollständiger legaler Name",
      dob:"Geburtsdatum",
      address:"Adresse",
      executor:"Name des Vollstreckers",
      executor_notes:"Anweisungen für den Vollstrecker",
      assets:"Vermögen und Eigentum",
      final_wishes:"Letzte Wünsche",
      notes:"Zusätzliche Notizen"
    }
  },
  it:{
    title:"Il mio piano patrimoniale",
    subtitle:"Documento personale · Non è un atto legale",
    personal:"Informazioni personali",
    executor:"Esecutore",
    assets:"Beni",
    final:"Ultime volontà",
    notes:"Note aggiuntive",
    print:"Stampa / PDF",
    prepared:"Preparato per:",
    country:"Paese:",
    date:"Data:",
    ph:{
      name:"Nome legale completo",
      dob:"Data di nascita",
      address:"Indirizzo",
      executor:"Nome dell’esecutore",
      executor_notes:"Istruzioni per l’esecutore",
      assets:"Beni e proprietà",
      final_wishes:"Ultime volontà",
      notes:"Note aggiuntive"
    }
  },
  es:{
    title:"Mi plan patrimonial",
    subtitle:"Registro personal · No es un documento legal",
    personal:"Información personal",
    executor:"Albacea",
    assets:"Activos",
    final:"Últimos deseos",
    notes:"Notas adicionales",
    print:"Imprimir / PDF",
    prepared:"Preparado para:",
    country:"País:",
    date:"Fecha:",
    ph:{
      name:"Nombre legal completo",
      dob:"Fecha de nacimiento",
      address:"Dirección",
      executor:"Nombre del albacea",
      executor_notes:"Instrucciones para el albacea",
      assets:"Activos y propiedad",
      final_wishes:"Últimos deseos",
      notes:"Notas adicionales"
    }
  }
};

/* COUNTRY → LANGUAGE (ALWAYS) */
const countryLanguageMap = {
  "Canada":"en",
  "United States":"en",
  "United Kingdom":"en",
  "France":"fr",
  "Germany":"de",
  "Italy":"it",
  "Spain":"es"
};

function applyLanguage(lang){
  const t = translations[lang];
  if(!t) return;

  title.textContent = t.title;
  subtitle.textContent = t.subtitle;
  btnPrint.textContent = t.print;

  printTitle.textContent = t.title;
  printPrepared.textContent = t.prepared;
  printCountryLabel.textContent = t.country;
  printDateLabel.textContent = t.date;

  document.querySelectorAll("[data-i18n]").forEach(el=>{
    el.textContent = t[el.dataset.i18n];
  });

  document.querySelectorAll("[data-ph]").forEach(el=>{
    el.placeholder = t.ph[el.dataset.ph];
  });
}

/* SAVE / LOAD */
function save(){
  const d={ country: country.value };
  document.querySelectorAll("[data-key]").forEach(el=>{
    d[el.dataset.key]=el.value||"";
  });
  localStorage.setItem(STORE, JSON.stringify(d));
}

function load(){
  const raw = localStorage.getItem(STORE);
  if(!raw) return;
  const d = JSON.parse(raw);
  country.value = d.country || "";
  document.querySelectorAll("[data-key]").forEach(el=>{
    el.value = d[el.dataset.key] || "";
  });
}

/* EVENTS */
document.addEventListener("DOMContentLoaded", ()=>{
  load();

  if(country.value){
    applyLanguage(countryLanguageMap[country.value] || "en");
  }else{
    applyLanguage("en");
  }

  document.querySelectorAll("[data-key]").forEach(el=>{
    el.addEventListener("input", save);
  });

  country.addEventListener("change", ()=>{
    const lang = countryLanguageMap[country.value] || "en";
    applyLanguage(lang);
    save();
  });

  window.addEventListener("beforeprint", ()=>{
    printName.textContent = document.querySelector('[data-key="name"]').value || "—";
    printCountry.textContent = country.value || "—";
    printDate.textContent = new Date().toLocaleDateString();
  });
});
</script>

</body>
</html>
