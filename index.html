<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estate Planner Pro</title>

<style>
body{
  margin:0;
  font-family:"Times New Roman", Georgia, serif;
  background:#1a202c;
  min-height:100vh;
}
.container{
  max-width:1100px;
  margin:40px auto;
  background:#fff;
  padding:40px;
  border-radius:12px;
}
h1{margin-top:0}
.subtitle{color:#555;margin-bottom:10px}
.topbar, .toolbar{
  display:flex;
  gap:10px;
  margin-bottom:10px;
  flex-wrap:wrap;
}
select,input,textarea,button{
  padding:6px;
  font-family:inherit;
}
button{cursor:pointer}
section{
  border:1px solid #ddd;
  border-radius:6px;
  margin-top:14px;
}
.section-header{
  padding:10px;
  background:#f5f5f5;
  cursor:pointer;
  font-weight:600;
}
.section-content{
  display:none;
  padding:12px;
}
section.open .section-content{display:block}
.repeat{
  border:1px solid #ccc;
  padding:10px;
  border-radius:6px;
  margin-bottom:10px;
}
.progress-bar{
  height:6px;
  background:#ddd;
  border-radius:3px;
  margin-top:15px;
}
.progress-fill{
  height:100%;
  background:#3b82f6;
  width:0%;
  border-radius:3px;
}
.progress-text{
  font-size:13px;
  margin-top:5px;
}
.upgrade-notice{
  background:#fff7cc;
  padding:10px;
  border-radius:6px;
  margin-top:10px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="container">

<h1 id="title">Estate Planner Pro</h1>
<div class="subtitle" id="subtitle">
Professional estate planning tool ‚Ä¢ Secure your legacy
</div>

<div class="topbar">
  <select id="country">
    <option>Canada</option>
    <option>United States</option>
    <option>France</option>
    <option>Germany</option>
    <option>Spain</option>
    <option>Japan</option>
    <option>China</option>
    <option>South Korea</option>
    <option>India</option>
  </select>

  <select id="language">
    <option value="en">EN</option>
    <option value="fr">FR</option>
    <option value="de">DE</option>
    <option value="es">ES</option>
    <option value="ja">JA</option>
    <option value="zh">‰∏≠Êñá</option>
    <option value="ko">KO</option>
    <option value="hi">HI</option>
  </select>

  <input value="Version 2.0.1 LANG FIX" disabled>
</div>

<div class="toolbar">
  <button data-translate="openAll" onclick="openAll()">üìÇ Open All</button>
  <button data-translate="closeAll" onclick="closeAll()">üìÅ Close All</button>
  <button data-translate="print" onclick="window.print()">üñ®Ô∏è Print / PDF</button>
</div>

<div class="upgrade-notice" data-translate="upgradeNotice">
‚≠ê FREE TRIAL: You have 7 basic sections. Start your free trial!
</div>

<div class="progress-bar">
  <div class="progress-fill" id="progressFill"></div>
</div>
<div class="progress-text" id="progressText">0% Complete</div>

<!-- SECTIONS -->

<section class="open">
  <div class="section-header" data-translate="personalInfo" onclick="toggle(this)">
    üìã Personal Information
  </div>
  <div class="section-content">
    <input placeholder="Full legal name" oninput="updateProgress()"><br><br>
    <input placeholder="Date of birth" oninput="updateProgress()"><br><br>
    <input placeholder="Address" oninput="updateProgress()">
  </div>
</section>

<section>
  <div class="section-header" data-translate="executors" onclick="toggle(this)">
    ‚öñÔ∏è Executors
  </div>
  <div class="section-content">
    <div class="repeat">
      <input placeholder="Executor name" oninput="updateProgress()"><br><br>
      <textarea placeholder="Instructions" oninput="updateProgress()"></textarea>
    </div>
  </div>
</section>

</div>

<script>
/* ===== VERSION MARKER ===== */
console.log("Estate Planner Pro v2.0.1 LANG FIX LOADED");

/* ===== LANGUAGE SYSTEM ===== */
let currentLang = "en";
let userSelectedLanguage = false;

const countryLang = {
  Canada:"en",
  "United States":"en",
  France:"fr",
  Germany:"de",
  Spain:"es",
  Japan:"ja",
  China:"zh",
  "South Korea":"ko",
  India:"hi"
};

const T = {
  en:{
    title:"Estate Planner Pro",
    subtitle:"Professional estate planning tool ‚Ä¢ Secure your legacy",
    upgradeNotice:"‚≠ê FREE TRIAL: You have 7 basic sections. Start your free trial!",
    openAll:"üìÇ Open All",
    closeAll:"üìÅ Close All",
    print:"üñ®Ô∏è Print / PDF",
    personalInfo:"üìã Personal Information",
    executors:"‚öñÔ∏è Executors",
    complete:"Complete",
    fields:"fields"
  },
  fr:{
    title:"Planificateur Successoral Pro",
    subtitle:"Outil professionnel de planification successorale",
    upgradeNotice:"‚≠ê ESSAI GRATUIT : D√©bloquez toutes les sections premium",
    openAll:"üìÇ Tout Ouvrir",
    closeAll:"üìÅ Tout Fermer",
    print:"üñ®Ô∏è Imprimer / PDF",
    personalInfo:"üìã Informations personnelles",
    executors:"‚öñÔ∏è Ex√©cuteurs testamentaires",
    complete:"Termin√©",
    fields:"champs"
  },
  de:{
    title:"Nachlassplaner Pro",
    subtitle:"Professionelles Nachlassplanungstool",
    upgradeNotice:"‚≠ê KOSTENLOSE TESTVERSION",
    openAll:"üìÇ Alle √ñffnen",
    closeAll:"üìÅ Alle Schlie√üen",
    print:"üñ®Ô∏è Drucken / PDF",
    personalInfo:"üìã Pers√∂nliche Informationen",
    executors:"‚öñÔ∏è Testamentsvollstrecker",
    complete:"Fertig",
    fields:"Felder"
  }
};

function applyLanguage(lang){
  currentLang = T[lang] ? lang : "en";
  document.getElementById("language").value = currentLang;
  const tr = T[currentLang];

  document.getElementById("title").textContent = tr.title;
  document.getElementById("subtitle").textContent = tr.subtitle;

  document.querySelectorAll("[data-translate]").forEach(el=>{
    const key = el.dataset.translate;
    if(tr[key]) el.textContent = tr[key];
  });

  document.querySelectorAll(".section-header[data-translate]").forEach(h=>{
    const key = h.dataset.translate;
    if(tr[key]) h.textContent = tr[key];
  });

  updateProgress();
}

/* ===== PROGRESS ===== */
function updateProgress(){
  const inputs = document.querySelectorAll("input:not([disabled]), textarea");
  const filled = [...inputs].filter(i=>i.value.trim()).length;
  const total = inputs.length;
  const percent = total ? Math.round((filled/total)*100) : 0;

  document.getElementById("progressFill").style.width = percent+"%";
  document.getElementById("progressText").textContent =
    `${percent}% ${T[currentLang].complete} (${filled}/${total} ${T[currentLang].fields})`;
}

/* ===== UI ===== */
function toggle(h){h.parentElement.classList.toggle("open")}
function openAll(){document.querySelectorAll("section").forEach(s=>s.classList.add("open"))}
function closeAll(){document.querySelectorAll("section").forEach(s=>s.classList.remove("open"))}

/* ===== INIT ===== */
document.addEventListener("DOMContentLoaded",()=>{
  document.getElementById("language").addEventListener("change",e=>{
    userSelectedLanguage = true;
    applyLanguage(e.target.value);
  });

  document.getElementById("country").addEventListener("change",e=>{
    if(userSelectedLanguage) return;
    applyLanguage(countryLang[e.target.value] || "en");
  });

  applyLanguage("en");
});
</script>

</body>
</html>
