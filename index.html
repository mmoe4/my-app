
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Estate Plan</title>

<style>
body{
  margin:0;
  font-family:"Times New Roman", Georgia, serif;
  background:#0a0e1a;
  position:relative;
  overflow-x:hidden;
  min-height:100vh;
}

/* Animated gradient base */
body::before{
  content:'';
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:
    linear-gradient(135deg, #0f1419 0%, #1a1f2e 25%, #0f1824 50%, #1e2433 75%, #0a0e1a 100%);
  animation:gradientShift 15s ease infinite;
  z-index:-3;
}

/* Subtle grid pattern */
body::after{
  content:'';
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background-image:
    linear-gradient(rgba(59, 130, 246, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(59, 130, 246, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  z-index:-2;
}

/* Floating orbs */
.bg-orb{
  position:fixed;
  border-radius:50%;
  filter:blur(80px);
  opacity:0.15;
  z-index:-1;
  animation:float 20s ease-in-out infinite;
}
.bg-orb:nth-child(1){
  width:400px;
  height:400px;
  background:radial-gradient(circle, #3b82f6, transparent);
  top:10%;
  left:15%;
  animation-delay:0s;
}
.bg-orb:nth-child(2){
  width:350px;
  height:350px;
  background:radial-gradient(circle, #6366f1, transparent);
  bottom:15%;
  right:20%;
  animation-delay:-7s;
}
.bg-orb:nth-child(3){
  width:300px;
  height:300px;
  background:radial-gradient(circle, #8b5cf6, transparent);
  top:50%;
  right:10%;
  animation-delay:-14s;
}

/* Background text watermarks */
.bg-text{
  position:fixed;
  font-size:120px;
  font-weight:700;
  color:rgba(59, 130, 246, 0.08);
  z-index:-1;
  pointer-events:none;
  user-select:none;
  font-family:"Times New Roman", Georgia, serif;
  letter-spacing:-2px;
  line-height:1.2;
}
.bg-text.large{
  font-size:180px;
  opacity:1;
  color:rgba(59, 130, 246, 0.06);
}
.bg-text:nth-child(4){
  top:15%;
  left:5%;
  transform:rotate(-15deg);
}
.bg-text:nth-child(5){
  bottom:20%;
  right:5%;
  transform:rotate(12deg);
}
.bg-text:nth-child(6){
  top:45%;
  left:50%;
  transform:translate(-50%, -50%) rotate(-8deg);
  font-size:200px;
}
.bg-text:nth-child(7){
  top:5%;
  right:10%;
  font-size:90px;
  color:rgba(99, 102, 241, 0.09);
  transform:rotate(18deg);
}
.bg-text:nth-child(8){
  bottom:10%;
  left:15%;
  font-size:85px;
  color:rgba(139, 92, 246, 0.08);
  transform:rotate(-12deg);
}

@keyframes gradientShift{
  0%, 100%{opacity:1}
  50%{opacity:0.8}
}

@keyframes float{
  0%, 100%{transform:translate(0, 0) scale(1)}
  33%{transform:translate(30px, -30px) scale(1.1)}
  66%{transform:translate(-20px, 20px) scale(0.9)}
}

.container{
  max-width:1200px;
  margin:40px auto;
  padding:40px;
  background:rgba(255,255,255,0.97);
  backdrop-filter:blur(10px);
  border-radius:12px;
  box-shadow:
    0 4px 6px rgba(0,0,0,0.1),
    0 10px 25px rgba(0,0,0,0.2),
    0 20px 40px rgba(0,0,0,0.15),
    inset 0 1px 0 rgba(255,255,255,0.9);
  position:relative;
  border:1px solid rgba(226, 232, 240, 0.5);
}
.container::before{
  display:none;
}

h1{
  text-align:center;
  margin:0;
  color:#1e293b;
  font-size:2.5em;
  font-weight:600;
}
.subtitle{
  text-align:center;
  color:#64748b;
  margin-bottom:20px;
  font-size:0.95em;
}

.topbar,.toolbar{
  display:grid;
  gap:10px;
  margin-bottom:15px;
}
.topbar{grid-template-columns:2fr 1fr 1fr}
.toolbar{grid-template-columns:repeat(auto-fit,minmax(120px,1fr))}

select,input,textarea,button{
  padding:12px;
  border-radius:6px;
  border:1px solid #e2e8f0;
  width:100%;
  box-sizing:border-box;
  font-family:inherit;
  font-size:14px;
  transition:all 0.2s ease;
}
select:focus,input:focus,textarea:focus{
  outline:none;
  border-color:#3b82f6;
  box-shadow:0 0 0 3px rgba(59, 130, 246, 0.1);
}
button{
  cursor:pointer;
  background:#f8fafc;
  color:#334155;
  font-weight:500;
  border:1px solid #e2e8f0;
}
button:hover{
  background:#f1f5f9;
  border-color:#cbd5e1;
}

.notice{
  background:#eff6ff;
  padding:12px 16px;
  border-radius:6px;
  font-size:14px;
  color:#1e40af;
  border-left:3px solid #3b82f6;
}

section{
  border:1px solid #e2e8f0;
  border-radius:8px;
  margin-top:20px;
  overflow:hidden;
  background:#ffffff;
}
.section-header{
  padding:16px;
  background:#f8fafc;
  font-weight:600;
  cursor:pointer;
  color:#1e293b;
  border-bottom:1px solid #e2e8f0;
  transition:background 0.2s ease;
}
.section-header:hover{
  background:#f1f5f9;
}
.section-content{
  padding:16px;
  display:none;
  background:#ffffff;
}
section.open .section-content{display:block}

.repeat{
  border:1px solid #e2e8f0;
  padding:16px;
  border-radius:6px;
  margin-bottom:12px;
  background:#f8fafc;
}
.repeat>*{margin-top:10px}
.repeat>*:first-child{margin-top:0}

textarea{min-height:140px}
.large{min-height:260px}
</style>
</head>

<body>

<div class="bg-orb"></div>
<div class="bg-orb"></div>
<div class="bg-orb"></div>

<div class="bg-text">LEGACY</div>
<div class="bg-text">PLANNING</div>
<div class="bg-text large">ESTATE</div>
<div class="bg-text">SECURE</div>
<div class="bg-text">FUTURE</div>

<div class="container">

<h1 data-t="title"></h1>
<div class="subtitle" data-t="subtitle"></div>

<div class="topbar">
  <select id="country">
    <option>Canada</option>
    <option>United States</option>
    <option>France</option>
    <option>Germany</option>
    <option>Spain</option>
    <option>Japan</option>
    <option>China</option>
    <option>South Korea</option>
    <option>India</option>
  </select>

  <select id="language">
    <option value="en">EN</option>
    <option value="fr">FR</option>
    <option value="de">DE</option>
    <option value="es">ES</option>
    <option value="ja">JA</option>
    <option value="zh">‰∏≠Êñá</option>
    <option value="ko">KO</option>
    <option value="hi">HI</option>
  </select>

  <input value="Version 1.0" disabled />
</div>

<div class="toolbar">
  <button onclick="openAll()">Open All</button>
  <button onclick="closeAll()">Close All</button>
  <button onclick="window.print()">Print / Save PDF</button>
</div>

<div class="notice" data-t="notice"></div>

<div class="toolbar">
  <button onclick="saveData()" data-t="saveBtn"></button>
  <button onclick="exportData()" data-t="exportBtn"></button>
  <button onclick="document.getElementById('fileInput').click()" data-t="importBtn"></button>
  <button onclick="clearData()" data-t="clearBtn"></button>
</div>
<input type="file" id="fileInput" accept=".json" style="display:none" onchange="handleImport(event)">

<section class="open">
  <div class="section-header" data-t="personal" onclick="toggle(this)"></div>
  <div class="section-content">
    <input data-ph="name">
    <input data-ph="dob">
    <input data-ph="address">
    <input data-ph="phone">
    <input data-ph="email">
  </div>
</section>

<section>
  <div class="section-header" data-t="executors" onclick="toggle(this)"></div>
  <div class="section-content" id="exec">
    <div class="repeat">
      <input data-ph="executorName">
      <input data-ph="executorRel">
      <textarea data-ph="executorNotes"></textarea>
    </div>
    <button data-t="addExecutor" onclick="addRow('exec')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="children" onclick="toggle(this)"></div>
  <div class="section-content" id="kids">
    <div class="repeat">
      <input data-ph="childName">
      <textarea data-ph="notes"></textarea>
    </div>
    <button data-t="addChild" onclick="addRow('kids')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="assets" onclick="toggle(this)"></div>
  <div class="section-content" id="assets">
    <div class="repeat">
      <input data-ph="assetDesc">
      <input data-ph="assetValue">
      <textarea data-ph="assetNotes"></textarea>
    </div>
    <button data-t="addAsset" onclick="addRow('assets')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="funeral" onclick="toggle(this)"></div>
  <div class="section-content">
    <textarea class="large" data-ph="funeralNotes"></textarea>
  </div>
</section>

<section>
  <div class="section-header" data-t="beneficiaries" onclick="toggle(this)"></div>
  <div class="section-content" id="beneficiaries">
    <div class="repeat">
      <input data-ph="beneficiaryName">
      <input data-ph="beneficiaryRel">
      <textarea data-ph="beneficiaryDetails"></textarea>
    </div>
    <button data-t="addBeneficiary" onclick="addRow('beneficiaries')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="digital" onclick="toggle(this)"></div>
  <div class="section-content" id="digital">
    <div class="repeat">
      <input data-ph="digitalType">
      <input data-ph="digitalAccount">
      <textarea data-ph="digitalAccess"></textarea>
    </div>
    <button data-t="addDigital" onclick="addRow('digital')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="insurance" onclick="toggle(this)"></div>
  <div class="section-content" id="insurance">
    <div class="repeat">
      <input data-ph="insuranceType">
      <input data-ph="insuranceCompany">
      <input data-ph="insurancePolicy">
      <textarea data-ph="insuranceNotes"></textarea>
    </div>
    <button data-t="addInsurance" onclick="addRow('insurance')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="debts" onclick="toggle(this)"></div>
  <div class="section-content" id="debts">
    <div class="repeat">
      <input data-ph="debtType">
      <input data-ph="debtAmount">
      <textarea data-ph="debtDetails"></textarea>
    </div>
    <button data-t="addDebt" onclick="addRow('debts')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="healthcare" onclick="toggle(this)"></div>
  <div class="section-content">
    <textarea class="large" data-ph="healthcareDirectives"></textarea>
  </div>
</section>

<section>
  <div class="section-header" data-t="professionals" onclick="toggle(this)"></div>
  <div class="section-content" id="professionals">
    <div class="repeat">
      <input data-ph="professionalType">
      <input data-ph="professionalName">
      <textarea data-ph="professionalContact"></textarea>
    </div>
    <button data-t="addProfessional" onclick="addRow('professionals')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="business" onclick="toggle(this)"></div>
  <div class="section-content">
    <textarea class="large" data-ph="businessInterests"></textarea>
  </div>
</section>

<section>
  <div class="section-header" data-t="pets" onclick="toggle(this)"></div>
  <div class="section-content" id="pets">
    <div class="repeat">
      <input data-ph="petName">
      <input data-ph="petType">
      <textarea data-ph="petCare"></textarea>
    </div>
    <button data-t="addPet" onclick="addRow('pets')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="charitable" onclick="toggle(this)"></div>
  <div class="section-content" id="charitable">
    <div class="repeat">
      <input data-ph="charityName">
      <input data-ph="charityAmount">
      <textarea data-ph="charityNotes"></textarea>
    </div>
    <button data-t="addCharity" onclick="addRow('charitable')"></button>
  </div>
</section>

<section>
  <div class="section-header" data-t="messages" onclick="toggle(this)"></div>
  <div class="section-content">
    <textarea class="large" data-ph="personalMessages"></textarea>
  </div>
</section>

<section>
  <div class="section-header" data-t="additionalNotes" onclick="toggle(this)"></div>
  <div class="section-content">
    <textarea class="large" data-ph="additionalNotes"></textarea>
  </div>
</section>

</div>

<script>
/* ---------- TRANSLATIONS ---------- */
const T = {
en:{
title:"My Estate Plan",
subtitle:"Personal estate planning record ¬∑ Not a legal document",
notice:"Auto-saves as you type. Data stored securely in your browser only.",
personal:"Personal Information",
executors:"Executors",
children:"Children / Dependents",
assets:"Assets & Property",
beneficiaries:"Beneficiaries & Inheritances",
digital:"Digital Assets & Accounts",
insurance:"Insurance Policies",
debts:"Debts & Liabilities",
healthcare:"Healthcare Directives",
professionals:"Professional Contacts",
business:"Business Interests",
pets:"Pet Care Instructions",
charitable:"Charitable Giving",
messages:"Personal Messages & Legacy",
funeral:"Funeral Wishes",
additionalNotes:"Additional Notes",
addExecutor:"‚ûï Add Another Executor",
addChild:"‚ûï Add Another Child",
addAsset:"‚ûï Add Another Asset",
addBeneficiary:"‚ûï Add Another Beneficiary",
addDigital:"‚ûï Add Another Account",
addInsurance:"‚ûï Add Another Policy",
addDebt:"‚ûï Add Another Debt",
addProfessional:"‚ûï Add Another Contact",
addPet:"‚ûï Add Another Pet",
addCharity:"‚ûï Add Another Charity",
saveBtn:"üíæ Save Now",
exportBtn:"üì• Export JSON",
importBtn:"üì§ Import JSON",
clearBtn:"üóëÔ∏è Clear All",
name:"Full legal name",
dob:"Date of birth (e.g., Jan 15, 1980)",
address:"Full residential address",
phone:"Phone number",
email:"Email address",
executorName:"Executor full name",
executorRel:"Relationship & contact info",
executorNotes:"Specific instructions or duties",
childName:"Child's full name & date of birth",
notes:"Guardian preferences, special needs, etc.",
assetDesc:"Asset description (property, accounts, investments)",
assetValue:"Estimated value (e.g., $250,000)",
assetNotes:"Beneficiary instructions, account numbers, location",
beneficiaryName:"Beneficiary full name",
beneficiaryRel:"Relationship to you",
beneficiaryDetails:"What they inherit (specific items, percentages, conditions)",
digitalType:"Type (Email, Social Media, Crypto, Cloud Storage, etc.)",
digitalAccount:"Account name or username",
digitalAccess:"Access instructions, passwords location, 2FA info",
insuranceType:"Type (Life, Health, Property, Vehicle, etc.)",
insuranceCompany:"Insurance company name",
insurancePolicy:"Policy number & beneficiaries",
insuranceNotes:"Coverage details, contact info, premium amount",
debtType:"Type (Mortgage, Car Loan, Credit Card, Personal Loan, etc.)",
debtAmount:"Outstanding amount",
debtDetails:"Creditor name, account number, payment instructions",
healthcareDirectives:"Living will, DNR wishes, organ donation, healthcare power of attorney, medical preferences, preferred hospitals",
professionalType:"Type (Attorney, Accountant, Financial Advisor, Doctor, etc.)",
professionalName:"Name & firm",
professionalContact:"Phone, email, address, account numbers",
businessInterests:"Business ownership details, partnership agreements, succession plans, buy-sell agreements, business contacts",
petName:"Pet name",
petType:"Type & breed",
petCare:"Vet info, preferred caregiver, care instructions, funds allocated",
charityName:"Charity or organization name",
charityAmount:"Amount or percentage to donate",
charityNotes:"Purpose, contact info, memorial gift preferences",
personalMessages:"Letters to loved ones, ethical will, values and life lessons, family history to preserve",
funeralNotes:"Burial vs cremation, service preferences, memorial wishes, organ donation",
additionalNotes:"Any other important information, safe combinations, hidden valuables"
},
fr:{
title:"Mon Plan Successoral",
subtitle:"Document personnel de planification successorale ¬∑ Non juridique",
notice:"Sauvegarde automatique. Donn√©es stock√©es localement dans votre navigateur.",
personal:"Informations Personnelles",
executors:"Ex√©cuteurs Testamentaires",
children:"Enfants / Personnes √† Charge",
assets:"Biens et Propri√©t√©s",
beneficiaries:"B√©n√©ficiaires et H√©ritages",
digital:"Actifs et Comptes Num√©riques",
insurance:"Polices d'Assurance",
debts:"Dettes et Passifs",
healthcare:"Directives de Sant√©",
professionals:"Contacts Professionnels",
business:"Int√©r√™ts Commerciaux",
pets:"Instructions pour Animaux",
charitable:"Dons Caritatifs",
messages:"Messages Personnels et H√©ritage",
funeral:"Volont√©s Fun√©raires",
additionalNotes:"Notes Suppl√©mentaires",
addExecutor:"‚ûï Ajouter un Ex√©cuteur",
addChild:"‚ûï Ajouter un Enfant",
addAsset:"‚ûï Ajouter un Bien",
addBeneficiary:"‚ûï Ajouter un B√©n√©ficiaire",
addDigital:"‚ûï Ajouter un Compte",
addInsurance:"‚ûï Ajouter une Police",
addDebt:"‚ûï Ajouter une Dette",
addProfessional:"‚ûï Ajouter un Contact",
addPet:"‚ûï Ajouter un Animal",
addCharity:"‚ûï Ajouter un Organisme",
saveBtn:"üíæ Sauvegarder",
exportBtn:"üì• Exporter JSON",
importBtn:"üì§ Importer JSON",
clearBtn:"üóëÔ∏è Tout Effacer",
name:"Nom l√©gal complet",
dob:"Date de naissance",
address:"Adresse compl√®te",
phone:"T√©l√©phone",
email:"Courriel",
executorName:"Nom de l'ex√©cuteur",
executorRel:"Relation et contact",
executorNotes:"Instructions sp√©cifiques",
childName:"Nom complet et date de naissance",
notes:"Tuteur pr√©f√©r√©, besoins sp√©ciaux",
assetDesc:"Description du bien",
assetValue:"Valeur estim√©e",
assetNotes:"B√©n√©ficiaire, num√©ros de compte",
beneficiaryName:"Nom du b√©n√©ficiaire",
beneficiaryRel:"Relation avec vous",
beneficiaryDetails:"Ce qu'ils h√©ritent (articles, pourcentages, conditions)",
digitalType:"Type (Email, R√©seaux Sociaux, Crypto, Cloud, etc.)",
digitalAccount:"Nom du compte ou identifiant",
digitalAccess:"Instructions d'acc√®s, emplacement des mots de passe",
insuranceType:"Type (Vie, Sant√©, Propri√©t√©, V√©hicule, etc.)",
insuranceCompany:"Nom de la compagnie",
insurancePolicy:"Num√©ro de police et b√©n√©ficiaires",
insuranceNotes:"D√©tails de couverture, contact, montant de prime",
debtType:"Type (Hypoth√®que, Pr√™t Auto, Carte de Cr√©dit, etc.)",
debtAmount:"Montant d√ª",
debtDetails:"Nom du cr√©ancier, num√©ro de compte, instructions",
healthcareDirectives:"Testament de vie, DNR, don d'organes, procuration m√©dicale",
professionalType:"Type (Avocat, Comptable, Conseiller Financier, etc.)",
professionalName:"Nom et cabinet",
professionalContact:"T√©l√©phone, email, adresse, num√©ros de compte",
businessInterests:"D√©tails de propri√©t√© d'entreprise, accords, succession",
petName:"Nom de l'animal",
petType:"Type et race",
petCare:"Info v√©t√©rinaire, soignant pr√©f√©r√©, instructions, fonds",
charityName:"Nom de l'organisme caritatif",
charityAmount:"Montant ou pourcentage √† donner",
charityNotes:"Objectif, contact, pr√©f√©rences de don comm√©moratif",
personalMessages:"Lettres aux proches, testament √©thique, valeurs",
funeralNotes:"Inhumation ou cr√©mation, pr√©f√©rences de service",
additionalNotes:"Autres informations importantes, combinaisons de coffre"
},
de:{
title:"Mein Nachlassplan",
subtitle:"Pers√∂nlicher Nachlassplanungsdokument ¬∑ Kein Rechtsdokument",
notice:"Auto-Speicherung beim Tippen. Daten lokal im Browser gespeichert.",
personal:"Pers√∂nliche Angaben",
executors:"Testamentsvollstrecker",
children:"Kinder / Angeh√∂rige",
assets:"Verm√∂gen und Eigentum",
funeral:"Bestattungsw√ºnsche",
additionalNotes:"Zus√§tzliche Notizen",
addExecutor:"‚ûï Vollstrecker Hinzuf√ºgen",
addChild:"‚ûï Kind Hinzuf√ºgen",
addAsset:"‚ûï Verm√∂gen Hinzuf√ºgen",
saveBtn:"üíæ Jetzt Speichern",
exportBtn:"üì• JSON Exportieren",
importBtn:"üì§ JSON Importieren",
clearBtn:"üóëÔ∏è Alles L√∂schen",
name:"Vollst√§ndiger Name",
dob:"Geburtsdatum",
address:"Vollst√§ndige Adresse",
phone:"Telefonnummer",
email:"E-Mail-Adresse",
executorName:"Name des Vollstreckers",
executorRel:"Beziehung und Kontakt",
executorNotes:"Spezifische Anweisungen",
childName:"Name und Geburtsdatum des Kindes",
notes:"Vormund-Pr√§ferenzen, besondere Bed√ºrfnisse",
assetDesc:"Verm√∂gensbeschreibung",
assetValue:"Gesch√§tzter Wert",
assetNotes:"Beg√ºnstigter, Kontonummern",
funeralNotes:"Beerdigung oder Ein√§scherung, Gottesdienst-W√ºnsche",
additionalNotes:"Medizinische Verf√ºgungen, Passw√∂rter, Tierpflege"
},
es:{
title:"Mi Plan Patrimonial",
subtitle:"Documento personal de planificaci√≥n patrimonial ¬∑ No es documento legal",
notice:"Guardado autom√°tico. Datos almacenados localmente en su navegador.",
personal:"Informaci√≥n Personal",
executors:"Albaceas",
children:"Hijos / Dependientes",
assets:"Activos y Propiedades",
funeral:"Deseos Funerarios",
additionalNotes:"Notas Adicionales",
addExecutor:"‚ûï A√±adir Albacea",
addChild:"‚ûï A√±adir Hijo",
addAsset:"‚ûï A√±adir Activo",
saveBtn:"üíæ Guardar Ahora",
exportBtn:"üì• Exportar JSON",
importBtn:"üì§ Importar JSON",
clearBtn:"üóëÔ∏è Borrar Todo",
name:"Nombre legal completo",
dob:"Fecha de nacimiento",
address:"Direcci√≥n completa",
phone:"Tel√©fono",
email:"Correo electr√≥nico",
executorName:"Nombre del albacea",
executorRel:"Relaci√≥n y contacto",
executorNotes:"Instrucciones espec√≠ficas",
childName:"Nombre completo y fecha de nacimiento",
notes:"Preferencias de tutor, necesidades especiales",
assetDesc:"Descripci√≥n del activo",
assetValue:"Valor estimado",
assetNotes:"Beneficiario, n√∫meros de cuenta",
funeralNotes:"Entierro o cremaci√≥n, preferencias de servicio",
additionalNotes:"Directivas m√©dicas, contrase√±as, cuidado de mascotas"
},
ja:{
title:"ÁßÅ„ÅÆÈÅ∫Áî£Ë®àÁîª",
subtitle:"ÂÄã‰∫∫„ÅÆÈÅ∫Áî£Ë®àÁîªË®òÈå≤ ¬∑ Ê≥ïÁöÑÊñáÊõ∏„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì",
notice:"Ëá™Âãï‰øùÂ≠ò„ÄÇ„Éá„Éº„Çø„ÅØ„Éñ„É©„Ç¶„Ç∂„Å´„É≠„Éº„Ç´„É´‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ",
personal:"ÂÄã‰∫∫ÊÉÖÂ†±",
executors:"ÈÅ∫Ë®ÄÂü∑Ë°åËÄÖ",
children:"Â≠ê‰æõ„ÉªÊâ∂È§äÂÆ∂Êóè",
assets:"Ë≥áÁî£„ÉªË≤°Áî£",
funeral:"Ëë¨ÂÑÄ„ÅÆÂ∏åÊúõ",
additionalNotes:"ËøΩÂä†„É°„É¢",
addExecutor:"‚ûï Âü∑Ë°åËÄÖ„ÇíËøΩÂä†",
addChild:"‚ûï Â≠ê‰æõ„ÇíËøΩÂä†",
addAsset:"‚ûï Ë≥áÁî£„ÇíËøΩÂä†",
saveBtn:"üíæ ‰ªä„Åô„Åê‰øùÂ≠ò",
exportBtn:"üì• JSONÂá∫Âäõ",
importBtn:"üì§ JSONÂÖ•Âäõ",
clearBtn:"üóëÔ∏è ÂÖ®ÂâäÈô§",
name:"Ê≠£ÂºèÊ∞èÂêç",
dob:"ÁîüÂπ¥ÊúàÊó•",
address:"‰ΩèÊâÄ",
phone:"ÈõªË©±Áï™Âè∑",
email:"„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ",
executorName:"Âü∑Ë°åËÄÖÊ∞èÂêç",
executorRel:"Á∂öÊüÑ„ÉªÈÄ£Áµ°ÂÖà",
executorNotes:"ÂÖ∑‰ΩìÁöÑ„Å™ÊåáÁ§∫",
childName:"Â≠ê‰æõ„ÅÆÊ∞èÂêç„Å®ÁîüÂπ¥ÊúàÊó•",
notes:"ÂæåË¶ã‰∫∫„ÅÆÂ∏åÊúõ„ÄÅÁâπÂà•„Å™ÈÖçÊÖÆ‰∫ãÈ†Ö",
assetDesc:"Ë≥áÁî£„ÅÆË™¨Êòé",
assetValue:"Êé®ÂÆö‰æ°ÂÄ§",
assetNotes:"ÂèóÂèñ‰∫∫„ÄÅÂè£Â∫ßÁï™Âè∑",
funeralNotes:"ÂüãËë¨„Åæ„Åü„ÅØÁÅ´Ëë¨„ÄÅËë¨ÂÑÄ„ÅÆÂ∏åÊúõ",
additionalNotes:"ÂåªÁôÇÊåáÁ§∫„ÄÅ„Éë„Çπ„ÉØ„Éº„Éâ„ÄÅ„Éö„ÉÉ„Éà„ÅÆ‰∏ñË©±"
},
zh:{
title:"ÊàëÁöÑÈÅó‰∫ßËßÑÂàí",
subtitle:"‰∏™‰∫∫ÈÅó‰∫ßËßÑÂàíËÆ∞ÂΩï ¬∑ ÈùûÊ≥ïÂæãÊñá‰ª∂",
notice:"Ëá™Âä®‰øùÂ≠ò„ÄÇÊï∞ÊçÆ‰ªÖÂ≠òÂÇ®Âú®ÊÇ®ÁöÑÊµèËßàÂô®‰∏≠„ÄÇ",
personal:"‰∏™‰∫∫‰ø°ÊÅØ",
executors:"ÈÅóÂò±ÊâßË°å‰∫∫",
children:"Â≠êÂ•≥/ÂèóÊäöÂÖª‰∫∫",
assets:"ËµÑ‰∫ß‰∏éË¥¢‰∫ß",
funeral:"Ëë¨Á§ºÊÑèÊÑø",
additionalNotes:"ÈôÑÂä†ËØ¥Êòé",
addExecutor:"‚ûï Ê∑ªÂä†ÊâßË°å‰∫∫",
addChild:"‚ûï Ê∑ªÂä†Â≠êÂ•≥",
addAsset:"‚ûï Ê∑ªÂä†ËµÑ‰∫ß",
saveBtn:"üíæ Á´ãÂç≥‰øùÂ≠ò",
exportBtn:"üì• ÂØºÂá∫JSON",
importBtn:"üì§ ÂØºÂÖ•JSON",
clearBtn:"üóëÔ∏è Ê∏ÖÈô§ÂÖ®ÈÉ®",
name:"Ê≥ïÂÆöÂÖ®Âêç",
dob:"Âá∫ÁîüÊó•Êúü",
address:"ÂÆåÊï¥Âú∞ÂùÄ",
phone:"ÁîµËØùÂè∑Á†Å",
email:"ÁîµÂ≠êÈÇÆÁÆ±",
executorName:"ÊâßË°å‰∫∫ÂßìÂêç",
executorRel:"ÂÖ≥Á≥ª‰∏éËÅîÁ≥ªÊñπÂºè",
executorNotes:"ÂÖ∑‰ΩìÊåáÁ§∫",
childName:"Â≠êÂ•≥ÂßìÂêç‰∏éÂá∫ÁîüÊó•Êúü",
notes:"ÁõëÊä§‰∫∫ÂÅèÂ•Ω„ÄÅÁâπÊÆäÈúÄÊ±Ç",
assetDesc:"ËµÑ‰∫ßÊèèËø∞",
assetValue:"‰º∞ËÆ°‰ª∑ÂÄº",
assetNotes:"ÂèóÁõä‰∫∫„ÄÅË¥¶Âè∑",
funeralNotes:"ÂúüËë¨ÊàñÁÅ´Âåñ„ÄÅ‰ª™ÂºèÂÅèÂ•Ω",
additionalNotes:"ÂåªÁñóÊåáÁ§∫„ÄÅÂØÜÁ†Å„ÄÅÂÆ†Áâ©ÁÖßÊñô"
},
ko:{
title:"ÎÇòÏùò ÏÉÅÏÜç Í≥ÑÌöç",
subtitle:"Í∞úÏù∏ ÏÉÅÏÜç Í≥ÑÌöç Í∏∞Î°ù ¬∑ Î≤ïÏ†Å Î¨∏ÏÑú ÏïÑÎãò",
notice:"ÏûêÎèô Ï†ÄÏû•. Îç∞Ïù¥ÌÑ∞Îäî Î∏åÎùºÏö∞Ï†ÄÏóê Î°úÏª¨ Ï†ÄÏû•Îê©ÎãàÎã§.",
personal:"Í∞úÏù∏ Ï†ïÎ≥¥",
executors:"Ïú†Ïñ∏ ÏßëÌñâÏûê",
children:"ÏûêÎÖÄ/Î∂ÄÏñëÍ∞ÄÏ°±",
assets:"ÏûêÏÇ∞ Î∞è Ïû¨ÏÇ∞",
funeral:"Ïû•Î°Ä Ìù¨ÎßùÏÇ¨Ìï≠",
additionalNotes:"Ï∂îÍ∞Ä Î©îÎ™®",
addExecutor:"‚ûï ÏßëÌñâÏûê Ï∂îÍ∞Ä",
addChild:"‚ûï ÏûêÎÖÄ Ï∂îÍ∞Ä",
addAsset:"‚ûï ÏûêÏÇ∞ Ï∂îÍ∞Ä",
saveBtn:"üíæ ÏßÄÍ∏à Ï†ÄÏû•",
exportBtn:"üì• JSON ÎÇ¥Î≥¥ÎÇ¥Í∏∞",
importBtn:"üì§ JSON Í∞ÄÏ†∏Ïò§Í∏∞",
clearBtn:"üóëÔ∏è Î™®Îëê ÏßÄÏö∞Í∏∞",
name:"Î≤ïÏ†Å ÏÑ±Î™Ö",
dob:"ÏÉùÎÖÑÏõîÏùº",
address:"Ï†ÑÏ≤¥ Ï£ºÏÜå",
phone:"Ï†ÑÌôîÎ≤àÌò∏",
email:"Ïù¥Î©îÏùº Ï£ºÏÜå",
executorName:"ÏßëÌñâÏûê Ïù¥Î¶Ñ",
executorRel:"Í¥ÄÍ≥Ñ Î∞è Ïó∞ÎùΩÏ≤ò",
executorNotes:"Íµ¨Ï≤¥Ï†ÅÏù∏ ÏßÄÏãúÏÇ¨Ìï≠",
childName:"ÏûêÎÖÄ Ïù¥Î¶Ñ Î∞è ÏÉùÎÖÑÏõîÏùº",
notes:"ÌõÑÍ≤¨Ïù∏ ÏÑ†Ìò∏, ÌäπÎ≥Ñ ÏöîÍµ¨ÏÇ¨Ìï≠",
assetDesc:"ÏûêÏÇ∞ ÏÑ§Î™Ö",
assetValue:"Ï∂îÏ†ï Í∞ÄÏπò",
assetNotes:"ÏàòÌòúÏûê, Í≥ÑÏ¢åÎ≤àÌò∏",
funeralNotes:"Îß§Ïû• ÎòêÎäî ÌôîÏû•, Ïû•Î°ÄÏãù ÏÑ†Ìò∏",
additionalNotes:"ÏùòÎ£å ÏßÄÏãú, ÎπÑÎ∞ÄÎ≤àÌò∏, Î∞òÎ†§ÎèôÎ¨º ÎèåÎ¥Ñ"
},
hi:{
title:"‡§Æ‡•á‡§∞‡•Ä ‡§è‡§∏‡•ç‡§ü‡•á‡§ü ‡§Ø‡•ã‡§ú‡§®‡§æ",
subtitle:"‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ¬∑ ‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º ‡§®‡§π‡•Ä‡§Ç",
notice:"‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§π‡•á‡§ú‡§®‡§æ‡•§ ‡§°‡•á‡§ü‡§æ ‡§Ü‡§™‡§ï‡•á ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§•‡§æ‡§®‡•Ä‡§Ø ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∏‡§Ç‡§ó‡•ç‡§∞‡§π‡•Ä‡§§‡•§",
personal:"‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä",
executors:"‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ï",
children:"‡§¨‡§ö‡•ç‡§ö‡•á/‡§Ü‡§∂‡•ç‡§∞‡§ø‡§§",
assets:"‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø‡§Ø‡§æ‡§Å ‡§î‡§∞ ‡§∏‡§Æ‡•ç‡§™‡§¶‡§æ",
funeral:"‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§æ‡§∞ ‡§á‡§ö‡•ç‡§õ‡§æ‡§è‡§Å",
additionalNotes:"‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§®‡•ã‡§ü‡•ç‡§∏",
addExecutor:"‚ûï ‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ï ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
addChild:"‚ûï ‡§¨‡§ö‡•ç‡§ö‡§æ ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
addAsset:"‚ûï ‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§ú‡•ã‡§°‡§º‡•á‡§Ç",
saveBtn:"üíæ ‡§Ö‡§≠‡•Ä ‡§∏‡§π‡•á‡§ú‡•á‡§Ç",
exportBtn:"üì• JSON ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§",
importBtn:"üì§ JSON ‡§Ü‡§Ø‡§æ‡§§",
clearBtn:"üóëÔ∏è ‡§∏‡§¨ ‡§Æ‡§ø‡§ü‡§æ‡§è‡§Ç",
name:"‡§™‡•Ç‡§∞‡§æ ‡§ï‡§æ‡§®‡•Ç‡§®‡•Ä ‡§®‡§æ‡§Æ",
dob:"‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø",
address:"‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ",
phone:"‡§´‡§º‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞",
email:"‡§à‡§Æ‡•á‡§≤ ‡§™‡§§‡§æ",
executorName:"‡§®‡§ø‡§∑‡•ç‡§™‡§æ‡§¶‡§ï ‡§ï‡§æ ‡§®‡§æ‡§Æ",
executorRel:"‡§∏‡§Ç‡§¨‡§Ç‡§ß ‡§î‡§∞ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï",
executorNotes:"‡§µ‡§ø‡§∂‡§ø‡§∑‡•ç‡§ü ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂",
childName:"‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§î‡§∞ ‡§ú‡§®‡•ç‡§Æ ‡§§‡§ø‡§•‡§ø",
notes:"‡§Ö‡§≠‡§ø‡§≠‡§æ‡§µ‡§ï ‡§µ‡§∞‡•Ä‡§Ø‡§§‡§æ, ‡§µ‡§ø‡§∂‡•á‡§∑ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ‡§è‡§Ç",
assetDesc:"‡§∏‡§Ç‡§™‡§§‡•ç‡§§‡§ø ‡§µ‡§ø‡§µ‡§∞‡§£",
assetValue:"‡§Ö‡§®‡•Å‡§Æ‡§æ‡§®‡§ø‡§§ ‡§Æ‡•Ç‡§≤‡•ç‡§Ø",
assetNotes:"‡§≤‡§æ‡§≠‡§æ‡§∞‡•ç‡§•‡•Ä, ‡§ñ‡§æ‡§§‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ",
funeralNotes:"‡§¶‡§´‡§® ‡§Ø‡§æ ‡§¶‡§æ‡§π ‡§∏‡§Ç‡§∏‡•ç‡§ï‡§æ‡§∞, ‡§∏‡•á‡§µ‡§æ ‡§µ‡§∞‡•Ä‡§Ø‡§§‡§æ‡§è‡§Å",
additionalNotes:"‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂, ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°, ‡§™‡§æ‡§≤‡§§‡•Ç ‡§ú‡§æ‡§®‡§µ‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•á‡§ñ‡§≠‡§æ‡§≤"
}
};

/* ---------- CORE ENGINE ---------- */
let currentLang="en";

function applyLanguage(lang){
  currentLang = T[lang] ? lang : "en";
  language.value = currentLang;

  document.querySelectorAll("[data-t]").forEach(el=>{
    const k=el.dataset.t;
    el.textContent = T[currentLang][k] || T.en[k] || "";
  });

  document.querySelectorAll("[data-ph]").forEach(el=>{
    const k=el.dataset.ph;
    el.placeholder = T[currentLang][k] || T.en[k] || "";
  });
}

/* ---------- COUNTRY AUTO ---------- */
const countryLang={
"Canada":"en","United States":"en","France":"fr","Germany":"de",
"Spain":"es","Japan":"ja","China":"zh","South Korea":"ko","India":"hi"
};

country.onchange=()=>applyLanguage(countryLang[country.value]||"en");
language.onchange=()=>applyLanguage(language.value);

/* ---------- ROWS ---------- */
function addRow(id){
  const c=document.getElementById(id);
  const row=c.querySelector(".repeat").cloneNode(true);
  row.querySelectorAll("input,textarea").forEach(i=>i.value="");
  c.insertBefore(row,c.lastElementChild);
  applyLanguage(currentLang);
}

/* ---------- UI ---------- */
function toggle(h){h.parentElement.classList.toggle("open")}
function openAll(){document.querySelectorAll("section").forEach(s=>s.classList.add("open"))}
function closeAll(){document.querySelectorAll("section").forEach(s=>s.classList.remove("open"))}

/* ---------- INIT ---------- */
applyLanguage("en");
loadData();

// Auto-save on input
document.addEventListener('input', debounce(saveData, 1000));

function debounce(fn, delay) {
  let timer;
  return function(...args) {
    clearTimeout(timer);
    timer = setTimeout(() => fn.apply(this, args), delay);
  };
}

/* ---------- DATA PERSISTENCE ---------- */
function saveData() {
  const data = {
    country: country.value,
    language: language.value,
    fields: {}
  };
  
  document.querySelectorAll('input:not([type="file"]):not([disabled]), textarea').forEach(el => {
    if (el.value) {
      const section = el.closest('section');
      const id = section ? section.querySelector('.section-header')?.dataset.t : 'misc';
      if (!data.fields[id]) data.fields[id] = [];
      data.fields[id].push({
        placeholder: el.dataset.ph || el.placeholder,
        value: el.value
      });
    }
  });
  
  try {
    localStorage.setItem('estatePlanData', JSON.stringify(data));
    console.log('‚úì Data saved successfully');
    return true;
  } catch (e) {
    console.error('Save failed:', e);
    alert('Save failed: ' + e.message);
    return false;
  }
}

function loadData() {
  try {
    const saved = localStorage.getItem('estatePlanData');
    if (!saved) {
      console.log('No saved data found');
      return;
    }
    
    const data = JSON.parse(saved);
    console.log('Loading data:', data);
    
    if (data.country) country.value = data.country;
    if (data.language) applyLanguage(data.language);
    
    if (data.fields) {
      Object.keys(data.fields).forEach(sectionKey => {
        const section = document.querySelector(`[data-t="${sectionKey}"]`)?.parentElement;
        if (!section) return;
        
        const container = section.querySelector('.section-content');
        const items = data.fields[sectionKey];
        
        items.forEach((item, idx) => {
          let input = container.querySelectorAll(`[data-ph="${item.placeholder}"]`)[idx];
          if (!input && idx > 0) {
            const containerId = container.id;
            if (containerId) addRow(containerId);
            input = container.querySelectorAll(`[data-ph="${item.placeholder}"]`)[idx];
          }
          if (input) input.value = item.value;
        });
      });
    }
    console.log('‚úì Data loaded successfully');
  } catch (e) {
    console.error('Load failed:', e);
  }
}

function exportData() {
  try {
    console.log('Export button clicked');
    
    // Force save first
    if (!saveData()) {
      return;
    }
    
    const data = localStorage.getItem('estatePlanData');
    console.log('Data to export:', data);
    
    if (!data || data === '{}' || data === 'null') {
      alert('No data to export. Please fill in some information first.');
      return;
    }
    
    // Create and download file
    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `estate-plan-${new Date().toISOString().split('T')[0]}.json`;
    document.body.appendChild(a);
    a.click();
    
    // Cleanup
    setTimeout(() => {
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }, 100);
    
    console.log('‚úì Export completed');
    alert('Estate plan exported successfully!');
  } catch (err) {
    console.error('Export error:', err);
    alert('Export failed: ' + err.message);
  }
}

function handleImport(event) {
  const file = event.target.files[0];
  if (!file) {
    console.log('No file selected');
    return;
  }
  
  console.log('Importing file:', file.name);
  
  const reader = new FileReader();
  reader.onload = (e) => {
    try {
      const content = e.target.result;
      console.log('File content:', content);
      
      // Validate JSON
      const data = JSON.parse(content);
      console.log('Parsed data:', data);
      
      // Save to localStorage
      localStorage.setItem('estatePlanData', JSON.stringify(data));
      
      alert('Import successful! Page will reload to display your data.');
      location.reload();
    } catch (err) {
      console.error('Import parse error:', err);
      alert('Import failed: Invalid JSON file. Please select a valid estate plan export.');
    }
  };
  
  reader.onerror = (e) => {
    console.error('File read error:', e);
    alert('Failed to read file');
  };
  
  reader.readAsText(file);
  
  // Reset input
  event.target.value = '';
}

function clearData() {
  if (confirm('‚ö†Ô∏è WARNING: This will permanently delete all your estate planning data.\n\nAre you absolutely sure you want to clear everything?\n\nConsider exporting a backup first!')) {
    localStorage.removeItem('estatePlanData');
    alert('All data cleared. Page will reload.');
    location.reload();
  }
}
</script>

</body>
</html>
